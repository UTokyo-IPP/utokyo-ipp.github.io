<!DOCTYPE html>

<html lang="jp" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8M0RXGPPSR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-8M0RXGPPSR');
    </script>
    
    <title>▲正規表現 &#8212; Pythonプログラミング入門  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=c058f7c8" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
    <script src="../_static/documentation_options.js?v=3ff7d7a7"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="索引" href="../index_of_terms.html" />
    <link rel="prev" title="▲Matplotlibライブラリ" href="5-matplotlib.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="▲正規表現">
<h1>▲正規表現<a class="headerlink" href="#▲正規表現" title="Link to this heading">¶</a></h1>
<p>正規表現について説明します。</p>
<p>参考</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.jp/3/library/re.html">https://docs.python.jp/3/library/re.html</a></p></li>
</ul>
<p><strong>正規表現</strong> (regular expression) を扱う場合、<code class="docutils literal notranslate"><span class="pre">re</span></code> というモジュールをインポートする必要があります。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
</pre></div>
</div>
</div>
<section id="正規表現の基本">
<h2>正規表現の基本<a class="headerlink" href="#正規表現の基本" title="Link to this heading">¶</a></h2>
<p>正規表現とは、文字列の<strong>パターン</strong>を表す式です。 文字列が正規表現に<strong>マッチする</strong>とは、文字列が正規表現の表すパターンに適合していることを意味します。 また、正規表現が文字列にマッチするという言い方もします。</p>
<p>たとえば、正規表現 <code class="docutils literal notranslate"><span class="pre">abc</span></code> は文字列 <code class="docutils literal notranslate"><span class="pre">abcde</span></code> （の部分文字列 <code class="docutils literal notranslate"><span class="pre">abc</span></code>）にマッチします。</p>
<p>正規表現に文字列がマッチしているかどうかを調べることのできる関数に <code class="docutils literal notranslate"><span class="pre">match</span></code> があります。</p>
<p><code class="docutils literal notranslate"><span class="pre">match</span></code> は、指定した <code class="docutils literal notranslate"><span class="pre">正規表現A</span></code> が <code class="docutils literal notranslate"><span class="pre">文字列B</span></code>（の先頭部分）にマッチするかどうか調べます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>re.match(正規表現A, 文字列B)
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;abcde&#39;</span><span class="p">)</span> <span class="c1">#マッチする</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ababc&#39;</span><span class="p">)</span> <span class="c1">#マッチしない</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 3), match=&#39;abc&#39;&gt;
None
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">match</span></code> では、マッチが成立している場合、<strong>matchオブジェクト</strong>と呼ばれる特殊なデータを返します。マッチが成立しない場合、 <code class="docutils literal notranslate"><span class="pre">None</span></code> を返します。</p>
<p>つまり、マッチする部分文字列を含む場合、返値は <code class="docutils literal notranslate"><span class="pre">None</span></code> ではないので、if文などの条件で真とみなされます。 したがって以下のようにして条件分岐することができます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if re.match(正規表現, 文字列):
    ...
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;abcde&#39;</span><span class="p">):</span> <span class="c1">#マッチする</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;正規表現abcが文字列abcdeにマッチする&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;正規表現abcが文字列abcdeにマッチしない&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ababc&#39;</span><span class="p">):</span> <span class="c1">#マッチしない</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;正規表現abcが文字列ababcにマッチする&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;正規表現abcが文字列ababcにマッチしない&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
正規表現abcが文字列abcdeにマッチする
正規表現abcが文字列ababcにマッチしない
</pre></div></div>
</div>
<p>さて、上で紹介したmatchオブジェクトには、マッチした文字列の情報が格納されています。上のセルの1つ目の実行結果を印字したものを見てください。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;_sre.SRE_Match</span> <span class="pre">object;</span> <span class="pre">span=(0,</span> <span class="pre">3),</span> <span class="pre">match='abc'&gt;</span></code> と表示されていると思います。このオブジェクト内の <code class="docutils literal notranslate"><span class="pre">match</span></code> という値は、マッチした文字列を、 <code class="docutils literal notranslate"><span class="pre">span</span></code> という値はマッチしたパターンが存在する、文字列のインデックスの範囲を表します。</p>
<p>正規表現では大文字と小文字は区別されます。たとえば、正規表現 <code class="docutils literal notranslate"><span class="pre">abc</span></code> は文字列 <code class="docutils literal notranslate"><span class="pre">ABCdef</span></code> にはマッチしません。勿論、正規表現 <code class="docutils literal notranslate"><span class="pre">ABC</span></code> も文字列 <code class="docutils literal notranslate"><span class="pre">abcdef</span></code> にはマッチしません。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ABCdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
None
None
</pre></div></div>
</div>
<p>そこで <code class="docutils literal notranslate"><span class="pre">match</span></code> の3番目の引数として <code class="docutils literal notranslate"><span class="pre">re.IGNORECASE</span></code> もしくは <code class="docutils literal notranslate"><span class="pre">re.I</span></code> を指定すると、大文字と小文字を区別せずにマッチするかどうかを調べることができます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ABCdef&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="s1">&#39;ABCdef&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ABCdef&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="s1">&#39;ABCdef&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;AbC&#39;</span><span class="p">,</span> <span class="s1">&#39;aBcdef&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 3), match=&#39;ABC&#39;&gt;
&lt;re.Match object; span=(0, 3), match=&#39;abc&#39;&gt;
&lt;re.Match object; span=(0, 3), match=&#39;ABC&#39;&gt;
&lt;re.Match object; span=(0, 3), match=&#39;ABC&#39;&gt;
&lt;re.Match object; span=(0, 3), match=&#39;abc&#39;&gt;
&lt;re.Match object; span=(0, 3), match=&#39;ABC&#39;&gt;
&lt;re.Match object; span=(0, 3), match=&#39;aBc&#39;&gt;
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">match</span></code> は文字列の先頭がマッチするかどうか調べますので、次のような場合、matchオブジェクトを返さずに <code class="docutils literal notranslate"><span class="pre">None</span></code> が返されます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;def&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
None
None
</pre></div></div>
</div>
<p>文字列の先頭しか調べられないのでは、いかにも不便です。</p>
<p>そこで、関数 <code class="docutils literal notranslate"><span class="pre">search</span></code> は、指定した <code class="docutils literal notranslate"><span class="pre">正規表現A</span></code> が <code class="docutils literal notranslate"><span class="pre">文字列B</span></code> に（文字列の先頭以外でも）マッチするかどうか調べることができます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>re.search(正規表現A, 文字列B)
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ababcd&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;def&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 3), match=&#39;abc&#39;&gt;
&lt;re.Match object; span=(2, 5), match=&#39;abc&#39;&gt;
&lt;re.Match object; span=(3, 6), match=&#39;def&#39;&gt;
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">search</span></code> の場合も3番目の引数として <code class="docutils literal notranslate"><span class="pre">re.IGNORECASE</span></code>、 もしくは <code class="docutils literal notranslate"><span class="pre">re.I</span></code> を指定することで、大文字と小文字を区別せずにマッチするかどうかを調べることができます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ABCdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;DEF&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ABCdef&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;DEF&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;not&#39;</span><span class="p">,</span> <span class="s1">&#39;It is NOT me.&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;NOT&#39;</span><span class="p">,</span> <span class="s1">&#39;It is not mine.&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
None
None
&lt;re.Match object; span=(0, 3), match=&#39;ABC&#39;&gt;
&lt;re.Match object; span=(3, 6), match=&#39;def&#39;&gt;
&lt;re.Match object; span=(6, 9), match=&#39;NOT&#39;&gt;
&lt;re.Match object; span=(6, 9), match=&#39;not&#39;&gt;
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">match</span></code> 関数と同様に、 <code class="docutils literal notranslate"><span class="pre">search</span></code> 関数においても、if文を使った条件分岐が可能であることは覚えておいてください。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if re.search(正規表現, 文字列):
    ...
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;not&#39;</span><span class="p">,</span> <span class="s1">&#39;It is NOT me.&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;正規表現notが文字列It is NOT me.にマッチする&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;正規表現notが文字列It is NOT me.にマッチしない&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;not&#39;</span><span class="p">,</span> <span class="s1">&#39;It is NOT me.&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;正規表現notが文字列It is NOT me.にマッチする&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;正規表現notが文字列It is NOT me.にマッチしない&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
正規表現notが文字列It is NOT me.にマッチしない
正規表現notが文字列It is NOT me.にマッチする
</pre></div></div>
</div>
<p>文字列の先頭からのマッチを調べたいときには、正規表現の先頭にキャレット (<code class="docutils literal notranslate"><span class="pre">^</span></code>) をつけてください。また、文字列の最後からマッチさせたいときは、正規表現の最後にドル記号 (<code class="docutils literal notranslate"><span class="pre">$</span></code>) をつけてください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ababcd&#39;</span><span class="p">)</span>  <span class="c1">#キャレットなしだとマッチする</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;^abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ababcd&#39;</span><span class="p">)</span> <span class="c1">#キャレットありだとマッチしない</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;def&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdefg&#39;</span><span class="p">)</span> <span class="c1">#ドル記号なしだとマッチする</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;def$&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdefg&#39;</span><span class="p">)</span> <span class="c1">#ドル記号ありだとマッチしない</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;def$&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdefxyzdef&#39;</span><span class="p">)</span> <span class="c1"># 2つあるうちの2番目（最後）の def にマッチする</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(2, 5), match=&#39;abc&#39;&gt;
None
&lt;re.Match object; span=(3, 6), match=&#39;def&#39;&gt;
None
&lt;re.Match object; span=(9, 12), match=&#39;def&#39;&gt;
</pre></div></div>
</div>
<p>ただ、ここまでの内容だと、正規表現を用いずに文字列のメソッド （<code class="docutils literal notranslate"><span class="pre">find</span></code> など）によっても実現が可能です。これでは正規表現を使うメリットはほとんどありません。</p>
<p>というのも、ここまで見てきた1つの正規表現によって、1つの文字列を表していたからです。しかし、最初に言った通り、正規表現は文字列の「パターン」を表します。すなわち、1つの正規表現で複数の文字列を表すことが可能なのです。</p>
<p>たとえば、正規表現 <code class="docutils literal notranslate"><span class="pre">ab</span></code> と正規表現 <code class="docutils literal notranslate"><span class="pre">de</span></code> という2つの正規表現を <code class="docutils literal notranslate"><span class="pre">|</span></code> という記号で繋げた <code class="docutils literal notranslate"><span class="pre">ab|de</span></code> も正規表現を表します。この正規表現では、<code class="docutils literal notranslate"><span class="pre">ab</span></code> と <code class="docutils literal notranslate"><span class="pre">de</span></code> という2つの文字列を表しており、これらのいずれかを含む文字列にマッチします。この <code class="docutils literal notranslate"><span class="pre">|</span></code> の記号（演算）を<strong>和</strong>、もしくは<strong>選択</strong>といいます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ab|de&#39;</span><span class="p">,</span> <span class="s1">&#39;bcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ab|de&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ab|de&#39;</span><span class="p">,</span> <span class="s1">&#39;fgdeab&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ab|de&#39;</span><span class="p">,</span> <span class="s1">&#39;acdf&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a|an|the&#39;</span><span class="p">,</span> <span class="s1">&#39;I slipped on a piece of the banana.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a|an|the&#39;</span><span class="p">,</span> <span class="s1">&#39;I slipped on the banana.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;Good (Morning|Evening)&#39;</span><span class="p">,</span> <span class="s1">&#39;Good Evening, Vietnam.&#39;</span><span class="p">)</span> <span class="c1">#正規表現内の（）については下で述べます</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;colo(u|)r&#39;</span><span class="p">,</span> <span class="s1">&#39;That color matches your suit.&#39;</span><span class="p">)</span> <span class="c1">#正規表現内の（）については下で述べます</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;colo(u|)r&#39;</span><span class="p">,</span> <span class="s1">&#39;That colour matches your suit.&#39;</span><span class="p">)</span> <span class="c1">#正規表現内の（）については下で述べます</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(2, 4), match=&#39;de&#39;&gt;
&lt;re.Match object; span=(0, 2), match=&#39;ab&#39;&gt;
&lt;re.Match object; span=(2, 4), match=&#39;de&#39;&gt;
None
&lt;re.Match object; span=(13, 14), match=&#39;a&#39;&gt;
&lt;re.Match object; span=(13, 16), match=&#39;the&#39;&gt;
&lt;re.Match object; span=(0, 12), match=&#39;Good Evening&#39;&gt;
&lt;re.Match object; span=(5, 10), match=&#39;color&#39;&gt;
&lt;re.Match object; span=(5, 11), match=&#39;colour&#39;&gt;
</pre></div></div>
</div>
<p>上記の3番目の例に注意してください。正規表現 <code class="docutils literal notranslate"><span class="pre">ab</span> <span class="pre">|</span> <span class="pre">de</span></code> では <code class="docutils literal notranslate"><span class="pre">ab</span></code> が <code class="docutils literal notranslate"><span class="pre">de</span></code> よりも先に記述されていますが、マッチする文字列は文字列上で先に出てきた方（<code class="docutils literal notranslate"><span class="pre">ab</span></code> ではなく、<code class="docutils literal notranslate"><span class="pre">de</span></code>）であることに注意してください。</p>
<p>細かい話ですが、正規表現 <code class="docutils literal notranslate"><span class="pre">abc</span></code> は、正規表現 <code class="docutils literal notranslate"><span class="pre">a</span></code> と正規表現 <code class="docutils literal notranslate"><span class="pre">b</span></code> と正規表現 <code class="docutils literal notranslate"><span class="pre">c</span></code> という3つの正規表現を繋げて構成された正規表現であり、このように正規表現を繋げて新しい正規表現を作る演算を<strong>連接</strong>といいます。</p>
<p><code class="docutils literal notranslate"><span class="pre">a*</span></code> は、正規表現 <code class="docutils literal notranslate"><span class="pre">a</span></code> を0回以上繰り返した文字列とマッチします。この <code class="docutils literal notranslate"><span class="pre">*</span></code> の演算を<strong>閉包</strong>といいます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a*&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a*&#39;</span><span class="p">,</span> <span class="s1">&#39;aabbcc&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a*&#39;</span><span class="p">,</span> <span class="s1">&#39;cde&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;bo*&#39;</span><span class="p">,</span> <span class="s1">&#39;boooo!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 1), match=&#39;a&#39;&gt;
&lt;re.Match object; span=(0, 2), match=&#39;aa&#39;&gt;
&lt;re.Match object; span=(0, 0), match=&#39;&#39;&gt;
&lt;re.Match object; span=(0, 5), match=&#39;boooo&#39;&gt;
</pre></div></div>
</div>
<p>上記の3番目の例において（文字 <code class="docutils literal notranslate"><span class="pre">a</span></code> が含まれていないにも関わらず）<code class="docutils literal notranslate"><span class="pre">None</span></code> が返らずに、マッチしているのを不思議に思うかもしれません。しかし、<code class="docutils literal notranslate"><span class="pre">a*</span></code> は <code class="docutils literal notranslate"><span class="pre">a</span></code> を0回反復した文字列にもマッチします。この0回反復した文字列とは、長さが0の文字列であり、<strong>空列</strong>とか<strong>空文字列</strong>と呼ばれます。文字列 <code class="docutils literal notranslate"><span class="pre">cde</span></code> の先頭には、空列があると見なせるので、<code class="docutils literal notranslate"><span class="pre">a*</span></code> が先頭部分にマッチしているのです。</p>
<p>たとえば、正規表現 <code class="docutils literal notranslate"><span class="pre">abb*</span></code> は、 <code class="docutils literal notranslate"><span class="pre">ab</span></code>, <code class="docutils literal notranslate"><span class="pre">abb</span></code>, <code class="docutils literal notranslate"><span class="pre">abbb</span></code>, … という文字列にマッチします。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;abb*&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;abb*&#39;</span><span class="p">,</span> <span class="s1">&#39;aabbcc&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;abb*&#39;</span><span class="p">,</span> <span class="s1">&#39;cde&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;hello*&#39;</span><span class="p">,</span> <span class="s1">&#39;Hi, hellooooo!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;hello*&#39;</span><span class="p">,</span> <span class="s1">&#39;Hi, good morning!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 2), match=&#39;ab&#39;&gt;
&lt;re.Match object; span=(1, 4), match=&#39;abb&#39;&gt;
None
&lt;re.Match object; span=(4, 13), match=&#39;hellooooo&#39;&gt;
None
</pre></div></div>
</div>
<p>これまでに紹介した連接、和、閉包という3つの演算を組み合わせることで様々な正規表現を記述することができますが、これらの演算には結合の強さが存在します。たとえば、先に見た <code class="docutils literal notranslate"><span class="pre">ab</span> <span class="pre">|</span> <span class="pre">cd</span></code> という正規表現は、 <code class="docutils literal notranslate"><span class="pre">ab</span></code> もしくは <code class="docutils literal notranslate"><span class="pre">cd</span></code> という文字列にマッチします（<code class="docutils literal notranslate"><span class="pre">(ab)|(cd)</span></code> と同じ意味です）。つまり、連接の方が和よりも強く結合しているのです。そこで、丸括弧を使って <code class="docutils literal notranslate"><span class="pre">a(b|c)d</span></code> とすると、この正規表現は、<code class="docutils literal notranslate"><span class="pre">abd</span> <span class="pre">|</span> <span class="pre">acd</span></code> と同じ意味になります。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ab|de&#39;</span><span class="p">,</span> <span class="s1">&#39;fgdeab&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;(ab)|(de)&#39;</span><span class="p">,</span> <span class="s1">&#39;fgdeab&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a(b|d)e&#39;</span><span class="p">,</span> <span class="s1">&#39;fgdeab&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a(b|d)e&#39;</span><span class="p">,</span> <span class="s1">&#39;fgadeab&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;abe|ade&#39;</span><span class="p">,</span> <span class="s1">&#39;fgadeab&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;(I|i)t(&#39;s| is| was)&quot;</span><span class="p">,</span> <span class="s2">&quot;It was rainy yesterday, but it&#39;s fine today.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;(I|i)t(&#39;s| is| was)&quot;</span><span class="p">,</span> <span class="s2">&quot;It rained yesterday, but it&#39;s fine today.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(2, 4), match=&#39;de&#39;&gt;
&lt;re.Match object; span=(2, 4), match=&#39;de&#39;&gt;
None
&lt;re.Match object; span=(2, 5), match=&#39;ade&#39;&gt;
&lt;re.Match object; span=(2, 5), match=&#39;ade&#39;&gt;
&lt;re.Match object; span=(0, 6), match=&#39;It was&#39;&gt;
&lt;re.Match object; span=(25, 29), match=&#34;it&#39;s&#34;&gt;
</pre></div></div>
</div>
<p>演算の結合の強さは、「和 &lt; 連接 &lt; 閉包」という順序になっています。これは数学の、「和（＋）&lt; 積(×) &lt; べき」と同じですので、直感的にもわかりやすいと思います。これまでに紹介した連接、和、閉包という3つの演算と結合の順序を明記する丸括弧 <code class="docutils literal notranslate"><span class="pre">()</span></code> とを組み合わせることで様々な正規表現を記述することができます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a(bc|b)*&#39;</span><span class="p">,</span> <span class="s1">&#39;defabcxyz&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a(bc|b)*&#39;</span><span class="p">,</span> <span class="s1">&#39;bbacbabbbbc&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ca(r|t(egory|tle|))&#39;</span><span class="p">,</span> <span class="s1">&#39;What category is this cat in?&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ca(r|t(egory|tle|))&#39;</span><span class="p">,</span> <span class="s1">&#39;No, this is not a carpet.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ca(r|t(egory|tle|))&#39;</span><span class="p">,</span> <span class="s1">&#39;We saw a cattle car almost hit the cat.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ca(r|t(egory|tle|))&#39;</span><span class="p">,</span> <span class="s1">&#39;Please locate him.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ca(r|t(egory|tle|))&#39;</span><span class="p">,</span> <span class="s2">&quot;Don&#39;t play castanets.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(3, 6), match=&#39;abc&#39;&gt;
&lt;re.Match object; span=(2, 3), match=&#39;a&#39;&gt;
&lt;re.Match object; span=(5, 13), match=&#39;category&#39;&gt;
&lt;re.Match object; span=(18, 21), match=&#39;car&#39;&gt;
&lt;re.Match object; span=(9, 15), match=&#39;cattle&#39;&gt;
&lt;re.Match object; span=(9, 12), match=&#39;cat&#39;&gt;
None
</pre></div></div>
</div>
<p>Pythonでは正規表現は文字列によって表していることに注意してください。たとえば、<code class="docutils literal notranslate"><span class="pre">match</span></code> 関数の第一引数を文字列の変数で置き換えられるということです。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;abcde&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">reg1</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span> <span class="c1"># 正規表現を文字列で記述する</span>
<span class="n">match2</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">reg1</span><span class="p">,</span> <span class="s1">&#39;abcde&#39;</span><span class="p">)</span> <span class="c1">#match1と同じ結果になる</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 3), match=&#39;abc&#39;&gt;
&lt;re.Match object; span=(0, 3), match=&#39;abc&#39;&gt;
</pre></div></div>
</div>
<p>このことを覚えておくと複雑な正規表現を書くときに、少しずつ分解して記述することができて便利です。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;(I|i)t(&#39;s| is| was)&quot;</span><span class="p">,</span> <span class="s2">&quot;It was rainy yesterday, but it&#39;s fine today.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">reg1</span> <span class="o">=</span> <span class="s1">&#39;(I|i)t&#39;</span> <span class="c1"># 正規表現の前半部分</span>
<span class="n">reg2</span> <span class="o">=</span> <span class="s2">&quot;(&#39;s| is| was)&quot;</span> <span class="c1"># 正規表現の後半部分</span>
<span class="n">reg3</span> <span class="o">=</span> <span class="n">reg1</span> <span class="o">+</span> <span class="n">reg2</span> <span class="c1"># 正規表現を表す2つの文字列を結合する</span>
<span class="nb">print</span><span class="p">(</span><span class="n">reg3</span><span class="p">)</span>
<span class="n">match2</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">reg3</span><span class="p">,</span> <span class="s2">&quot;It was rainy yesterday, but it&#39;s fine today.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 6), match=&#39;It was&#39;&gt;
(I|i)t(&#39;s| is| was)
&lt;re.Match object; span=(0, 6), match=&#39;It was&#39;&gt;
</pre></div></div>
</div>
</section>
<section id="練習">
<h2>練習<a class="headerlink" href="#練習" title="Link to this heading">¶</a></h2>
<p>文字列 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を引数として取り、 <code class="docutils literal notranslate"><span class="pre">str1</span></code> の中に「月を表す文字列」が含まれているかどうか調べて、含まれていればマッチしたときのmatchオブジェクトを、含まれいなければ <code class="docutils literal notranslate"><span class="pre">None</span></code> を返す関数 <code class="docutils literal notranslate"><span class="pre">check_monthstr</span></code> を作成してください。 ただし、「月を表す文字列」 は次のような文字列とします。</p>
<ol class="arabic simple">
<li><p>長さ2の <code class="docutils literal notranslate"><span class="pre">mm</span></code> という文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mm</span></code> は、<code class="docutils literal notranslate"><span class="pre">00</span></code>, <code class="docutils literal notranslate"><span class="pre">01</span></code>, …, <code class="docutils literal notranslate"><span class="pre">12</span></code> のいずれかの文字列</p></li>
</ol>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">check_monthstr</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[18], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が全て <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">check_monthstr</span><span class="p">(</span><span class="s1">&#39;10&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;10&#39;</span><span class="p">)</span> <span class="c1"># group()については後半に説明があります（オプショナル）</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_monthstr</span><span class="p">(</span><span class="s1">&#39;mon1521vb&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_monthstr</span><span class="p">(</span><span class="s1">&#39;00an23&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_monthstr</span><span class="p">(</span><span class="s1">&#39;13302&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;02&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[19], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">check_monthstr</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">10</span><span style="color: rgb(175,0,0)">&#39;</span>)<span style="color: rgb(98,98,98)">.</span>group() <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">10</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(95,135,135)"># group()については後半に説明があります（オプショナル）</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(check_monthstr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">mon1521vb</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(check_monthstr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">00an23</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;check_monthstr&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="id4">
<h2>練習<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<p>文字列 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を引数として取り、 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を構成する文字列が <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">C</span></code>, <code class="docutils literal notranslate"><span class="pre">G</span></code>, <code class="docutils literal notranslate"><span class="pre">T</span></code> の4種類の文字以外の文字を含むかどうか調べて、これら以外を含む場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> を、そうでない場合は <code class="docutils literal notranslate"><span class="pre">True</span></code> を返す関数 <code class="docutils literal notranslate"><span class="pre">check_ACGTstr</span></code> を作成してください。 ただし、大文字と小文字は区別しません。また、空列の場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> を返してください。</p>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">check_ACGTstr</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[20], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が全て <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">check_ACGTstr</span><span class="p">(</span><span class="s1">&#39;AcCGTAGCacATcGgAaaTtGCacT&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_ACGTstr</span><span class="p">(</span><span class="s1">&#39;:ACaacgta24FgtGH&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_ACGTstr</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[21], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">check_ACGTstr</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">AcCGTAGCacATcGgAaaTtGCacT</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">True</span>)
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(check_ACGTstr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">:ACaacgta24FgtGH</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">False</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(check_ACGTstr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">False</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;check_ACGTstr&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="id5">
<h2>練習<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h2>
<p>文字列 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を引数として取り、 <code class="docutils literal notranslate"><span class="pre">str1</span></code> の中に「時刻を表す文字列」が含まれているかどうか調べて、含まれていればマッチしたときのmatchオブジェクトを、含まれいなければ <code class="docutils literal notranslate"><span class="pre">None</span></code> を返す関数 <code class="docutils literal notranslate"><span class="pre">check_timestr</span></code> を作成してください。 ただし、「時刻を表す文字列」 は次のような文字列とします。</p>
<ol class="arabic simple">
<li><p>長さ5の <code class="docutils literal notranslate"><span class="pre">hh:mm</span></code> という文字列であり、12時間表示で時間を表す。</p></li>
<li><p>前半の2文字 <code class="docutils literal notranslate"><span class="pre">hh</span></code> は、 <code class="docutils literal notranslate"><span class="pre">00</span></code>, <code class="docutils literal notranslate"><span class="pre">01</span></code>, …, <code class="docutils literal notranslate"><span class="pre">11</span></code> のいずれかの文字列</p></li>
<li><p>後半の2文字 <code class="docutils literal notranslate"><span class="pre">mm</span></code> は、 <code class="docutils literal notranslate"><span class="pre">00</span></code>, <code class="docutils literal notranslate"><span class="pre">01</span></code>, …, <code class="docutils literal notranslate"><span class="pre">59</span></code> のいずれかの文字列</p></li>
</ol>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">check_timestr</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[22], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が全て <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">check_timestr</span><span class="p">(</span><span class="s1">&#39;10:23&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;10:23&#39;</span><span class="p">)</span> <span class="c1"># group()については後半に説明があります（オプショナル）</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_timestr</span><span class="p">(</span><span class="s1">&#39;time?1023&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_timestr</span><span class="p">(</span><span class="s1">&#39;time?11:23&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;11:23&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_timestr</span><span class="p">(</span><span class="s1">&#39;12:3xx1;23ah23:23&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[23], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">check_timestr</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">10:23</span><span style="color: rgb(175,0,0)">&#39;</span>)<span style="color: rgb(98,98,98)">.</span>group() <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">10:23</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(95,135,135)"># group()については後半に説明があります（オプショナル）</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(check_timestr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">time?1023</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(check_timestr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">time?11:23</span><span style="color: rgb(175,0,0)">&#39;</span>)<span style="color: rgb(98,98,98)">.</span>group() <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">11:23</span><span style="color: rgb(175,0,0)">&#39;</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;check_timestr&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="id6">
<h2>練習<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h2>
<p>文字列 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を引数として取り、<code class="docutils literal notranslate"><span class="pre">str1</span></code> の中に「IPv4を表す文字列」が含まれているかどうか調べて、含まれていればマッチしたときのmatchオブジェクトを、含まれいなければ <code class="docutils literal notranslate"><span class="pre">None</span></code> を返す関数 <code class="docutils literal notranslate"><span class="pre">check_ipv4str</span></code> を作成してください。 ただし、「IPv4を表す文字列」 は次のような文字列とします。</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">aaa:bbb:ccc:ddd</span></code> という形式の長さ15の文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aaa</span></code>, <code class="docutils literal notranslate"><span class="pre">bbb</span></code>, <code class="docutils literal notranslate"><span class="pre">ccc</span></code>, <code class="docutils literal notranslate"><span class="pre">ddd</span></code> はいずれも、 <code class="docutils literal notranslate"><span class="pre">000</span></code>, <code class="docutils literal notranslate"><span class="pre">001</span></code>, …, <code class="docutils literal notranslate"><span class="pre">254</span></code>, <code class="docutils literal notranslate"><span class="pre">255</span></code> のいずれかの文字列</p></li>
</ol>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">check_ipv4str</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[24], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が全て <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">check_ipv4str</span><span class="p">(</span><span class="s1">&#39;IP=255:255:255:255&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;255:255:255:255&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_ipv4str</span><span class="p">(</span><span class="s1">&#39;notIP=2x5:a5b:2c:255:14:444&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_ipv4str</span><span class="p">(</span><span class="s1">&#39;IP?=25:25:55:155&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_ipv4str</span><span class="p">(</span><span class="s1">&#39;IP?=255:255:255&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[25], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">check_ipv4str</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">IP=255:255:255:255</span><span style="color: rgb(175,0,0)">&#39;</span>)<span style="color: rgb(98,98,98)">.</span>group() <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">255:255:255:255</span><span style="color: rgb(175,0,0)">&#39;</span>)
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(check_ipv4str(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">notIP=2x5:a5b:2c:255:14:444</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(check_ipv4str(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">IP?=25:25:55:155</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;check_ipv4str&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="id7">
<h2>練習<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h2>
<p>文字列 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を引数として取り、 <code class="docutils literal notranslate"><span class="pre">str1</span></code> の中に「月と日を表す文字列」が含まれているかどうか調べて、含まれていればマッチしたときのmatchオブジェクトを、含まれいなければ <code class="docutils literal notranslate"><span class="pre">None</span></code> を返す関数 <code class="docutils literal notranslate"><span class="pre">check_monthdaystr</span></code> を作成してください。 ただし、「月と日を表す文字列」 は次のような文字列とします。</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mm/dd</span></code> という長さ5の文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mm</span></code> は、 <code class="docutils literal notranslate"><span class="pre">01</span></code>, <code class="docutils literal notranslate"><span class="pre">02</span></code>, …, <code class="docutils literal notranslate"><span class="pre">12</span></code> のいずれかの文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dd</span></code> は、<code class="docutils literal notranslate"><span class="pre">mm</span></code> が <code class="docutils literal notranslate"><span class="pre">01</span></code>, <code class="docutils literal notranslate"><span class="pre">03</span></code>, <code class="docutils literal notranslate"><span class="pre">05</span></code>, <code class="docutils literal notranslate"><span class="pre">07</span></code>, <code class="docutils literal notranslate"><span class="pre">08</span></code>, <code class="docutils literal notranslate"><span class="pre">10</span></code>, <code class="docutils literal notranslate"><span class="pre">12</span></code> ならば、<code class="docutils literal notranslate"><span class="pre">01</span></code>, <code class="docutils literal notranslate"><span class="pre">02</span></code>, …, <code class="docutils literal notranslate"><span class="pre">31</span></code> のいずれかの文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dd</span></code> は、<code class="docutils literal notranslate"><span class="pre">mm</span></code> が <code class="docutils literal notranslate"><span class="pre">04</span></code>, <code class="docutils literal notranslate"><span class="pre">06</span></code>, <code class="docutils literal notranslate"><span class="pre">09</span></code>, <code class="docutils literal notranslate"><span class="pre">11</span></code> ならば、<code class="docutils literal notranslate"><span class="pre">01</span></code>, <code class="docutils literal notranslate"><span class="pre">02</span></code>, …, <code class="docutils literal notranslate"><span class="pre">30</span></code> のいずれかの文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dd</span></code> は、<code class="docutils literal notranslate"><span class="pre">mm</span></code> が <code class="docutils literal notranslate"><span class="pre">02</span></code> ならば、<code class="docutils literal notranslate"><span class="pre">01</span></code>, <code class="docutils literal notranslate"><span class="pre">02</span></code>, …, <code class="docutils literal notranslate"><span class="pre">29</span></code> のいずれかの文字列</p></li>
</ol>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">check_monthdaystr</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[26], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が全て <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">check_monthdaystr</span><span class="p">(</span><span class="s1">&#39;year11/31month11/30day15hour/27minute/sec&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;11/30&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_monthdaystr</span><span class="p">(</span><span class="s1">&#39;11/31&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_monthdaystr</span><span class="p">(</span><span class="s1">&#39;x02f/2d5ax&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_monthdaystr</span><span class="p">(</span><span class="s1">&#39;03/24&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;03/24&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[27], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">check_monthdaystr</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">year11/31month11/30day15hour/27minute/sec</span><span style="color: rgb(175,0,0)">&#39;</span>)<span style="color: rgb(98,98,98)">.</span>group() <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">11/30</span><span style="color: rgb(175,0,0)">&#39;</span>)
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(check_monthdaystr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">11/31</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(check_monthdaystr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">x02f/2d5ax</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;check_monthdaystr&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="文字クラス">
<h2>文字クラス<a class="headerlink" href="#文字クラス" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">[abc]</span></code> は <code class="docutils literal notranslate"><span class="pre">a|b|c</span></code> と同じ意味の正規表現です。この角括弧を用いた表記は、<strong>文字クラス</strong>と呼ばれます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[abc]&#39;</span><span class="p">,</span> <span class="s1">&#39;defabcxyz&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[3456]&#39;</span><span class="p">,</span> <span class="s1">&#39;1234567890&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ha[sd]&#39;</span><span class="p">,</span> <span class="s1">&#39;He has an apple and they have pineapples.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(3, 4), match=&#39;a&#39;&gt;
&lt;re.Match object; span=(2, 3), match=&#39;3&#39;&gt;
&lt;re.Match object; span=(3, 6), match=&#39;has&#39;&gt;
</pre></div></div>
</div>
<p>勿論、これまでの和や閉包と組み合わせて用いることができます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[def][abc]&#39;</span><span class="p">,</span> <span class="s1">&#39;defabcxyz&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;4[3456][3456]([3456]|[7890])&#39;</span><span class="p">,</span> <span class="s1">&#39;1234567890&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;6[789]*&#39;</span><span class="p">,</span> <span class="s1">&#39;1234567890&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;she ha[sd]|they ha(ve|d)&#39;</span><span class="p">,</span> <span class="s1">&#39;He has an apple and they have pineapples.&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(2, 4), match=&#39;fa&#39;&gt;
&lt;re.Match object; span=(3, 7), match=&#39;4567&#39;&gt;
&lt;re.Match object; span=(5, 9), match=&#39;6789&#39;&gt;
&lt;re.Match object; span=(20, 29), match=&#39;they have&#39;&gt;
</pre></div></div>
</div>
<p>ただし、文字クラスの中で連接、和、閉包は無効化されます。たとえば、<code class="docutils literal notranslate"><span class="pre">[a*]</span></code> という正規表現は、<code class="docutils literal notranslate"><span class="pre">a</span></code> もしくは、<code class="docutils literal notranslate"><span class="pre">*</span></code> にマッチします。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[a*]&#39;</span><span class="p">,</span> <span class="s1">&#39;aaaaaa&#39;</span><span class="p">)</span> <span class="c1"># a一文字にマッチ</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[a*]&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span> <span class="c1"># *一文字にマッチ</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a*&#39;</span><span class="p">,</span> <span class="s1">&#39;aaaaaa&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a*&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span> <span class="c1"># 文字クラスでない場合、*にはマッチしない</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[a|b]&#39;</span><span class="p">,</span> <span class="s1">&#39;defabcxyz&#39;</span><span class="p">)</span> <span class="c1"># a一文字にマッチ</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[a|b]&#39;</span><span class="p">,</span> <span class="s1">&#39;|&#39;</span><span class="p">)</span> <span class="c1">#  |一文字にマッチ</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a|b&#39;</span><span class="p">,</span> <span class="s1">&#39;|&#39;</span><span class="p">)</span> <span class="c1"># 文字クラスでない場合、|にはマッチしない</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 1), match=&#39;a&#39;&gt;
&lt;re.Match object; span=(0, 1), match=&#39;*&#39;&gt;
&lt;re.Match object; span=(0, 6), match=&#39;aaaaaa&#39;&gt;
&lt;re.Match object; span=(0, 0), match=&#39;&#39;&gt;
&lt;re.Match object; span=(3, 4), match=&#39;a&#39;&gt;
&lt;re.Match object; span=(0, 1), match=&#39;|&#39;&gt;
None
</pre></div></div>
</div>
<p>文字クラスでは一文字分の連続する和演算を表すことができますが、長さ2以上の文字列を表すことはできません。すなわち、<code class="docutils literal notranslate"><span class="pre">ab</span> <span class="pre">|</span> <span class="pre">cd</span></code> という正規表現を（1つの）文字クラスで表すことはできません。</p>
<p>また、 <code class="docutils literal notranslate"><span class="pre">[abcdefg]</span></code> や <code class="docutils literal notranslate"><span class="pre">[gcdbeaf]</span></code> などは <code class="docutils literal notranslate"><span class="pre">[a-g]</span></code>、<code class="docutils literal notranslate"><span class="pre">[1234567]</span></code> や <code class="docutils literal notranslate"><span class="pre">[4271635]</span></code> などは <code class="docutils literal notranslate"><span class="pre">[1-7]</span></code> などとハイフン (<code class="docutils literal notranslate"><span class="pre">-</span></code>) を用いることで簡潔に表すことができます。たとえば、全てのアルファベットと数字を表す場合は、<code class="docutils literal notranslate"><span class="pre">[a-zA-Z0-9]</span></code> で表されます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[a-c]&#39;</span><span class="p">,</span> <span class="s1">&#39;defabcxyz&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;3[4-8]&#39;</span><span class="p">,</span> <span class="s1">&#39;1234567890&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;:[a-zA-Z0-9]*:&#39;</span><span class="p">,</span> <span class="s1">&#39;a1b2c3:d4e5f:6g7A8B:9C0D&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(3, 4), match=&#39;a&#39;&gt;
&lt;re.Match object; span=(2, 4), match=&#39;34&#39;&gt;
&lt;re.Match object; span=(6, 13), match=&#39;:d4e5f:&#39;&gt;
</pre></div></div>
</div>
<p>文字クラスの内側をキャレット (<code class="docutils literal notranslate"><span class="pre">^</span></code>) で始めると、<strong>否定文字クラス</strong>となり、キャレットの後ろに指定した文字以外の文字とマッチする正規表現となります。たとえば、<code class="docutils literal notranslate"><span class="pre">[^abc]</span></code> は <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code> 以外の1文字とマッチする正規表現です。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[^abc]&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdefxyz&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[^def]&#39;</span><span class="p">,</span> <span class="s1">&#39;defabcxyz&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[^1-7]&#39;</span><span class="p">,</span> <span class="s1">&#39;1234567890&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ha[^sd]e&#39;</span><span class="p">,</span> <span class="s1">&#39;He has an apple and they have pineapples.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(3, 4), match=&#39;d&#39;&gt;
&lt;re.Match object; span=(3, 4), match=&#39;a&#39;&gt;
&lt;re.Match object; span=(7, 8), match=&#39;8&#39;&gt;
&lt;re.Match object; span=(25, 29), match=&#39;have&#39;&gt;
</pre></div></div>
</div>
<p>キャレットを先頭以外につけた場合は、単なる文字クラスになります。すなわち、キャレットにマッチするかどうかが判定されます。たとえば、<code class="docutils literal notranslate"><span class="pre">[d^ef]</span></code> は、<code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">^</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">f</span></code> のいずれかにマッチします。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[d^ef]&#39;</span><span class="p">,</span> <span class="s1">&#39;defabcxyz&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[d^ef]&#39;</span><span class="p">,</span> <span class="s1">&#39;a^bcdef&#39;</span><span class="p">)</span> <span class="c1"># キャレットにマッチする</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 1), match=&#39;d&#39;&gt;
&lt;re.Match object; span=(1, 2), match=&#39;^&#39;&gt;
</pre></div></div>
</div>
</section>
<section id="正規表現に関する基本的な関数">
<h2>正規表現に関する基本的な関数<a class="headerlink" href="#正規表現に関する基本的な関数" title="Link to this heading">¶</a></h2>
<p>上で紹介した正規表現を利用してマッチする文字列が存在するかどうかを調べるだけではなく、マッチした文字列に対して色々な処理を加えることができます。以下では2つの基本的な関数を紹介します。</p>
<section id="sub">
<h3><code class="docutils literal notranslate"><span class="pre">sub</span></code><a class="headerlink" href="#sub" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">sub</span></code> は、<code class="docutils literal notranslate"><span class="pre">正規表現R</span></code> にマッチする <code class="docutils literal notranslate"><span class="pre">文字列A</span></code> 中の全ての文字列を、指定した <code class="docutils literal notranslate"><span class="pre">文字列B</span></code> で置き換えることができます。</p>
<p>具体的には次のようにすると、</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>re.sub(正規表現R, 置換する文字列B, 元になる文字列A)
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">R</span></code> とマッチする <code class="docutils literal notranslate"><span class="pre">A</span></code> 中の全ての文字列を <code class="docutils literal notranslate"><span class="pre">B</span></code> と置き換えることができます。置き換えられた結果の文字列（新たに作られて）が返値となります。（もちろん、もとの文字列 <code class="docutils literal notranslate"><span class="pre">A</span></code> は変化しません。）</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">str1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[346]&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;03-5454-68284&#39;</span><span class="p">)</span> <span class="c1">#3,4,6をxに置き換える</span>
<span class="nb">print</span><span class="p">(</span><span class="n">str1</span><span class="p">)</span>
<span class="n">str1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[.,:;!?]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s2">&quot;He has three pets: a cat, a dog and a giraffe, doesn&#39;t he?&quot;</span><span class="p">)</span> <span class="c1">#句読点を削除する（空文字列に置き換える）</span>
<span class="nb">print</span><span class="p">(</span><span class="n">str1</span><span class="p">)</span>
<span class="n">str1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;\(a\)|あっとまーく|＠&#39;</span><span class="p">,</span> <span class="s1">&#39;@&#39;</span><span class="p">,</span> <span class="s1">&#39;accountnameあっとまーくtest.ecc.u-tokyo.ac.jp&#39;</span><span class="p">)</span> <span class="c1"># スパム回避の文字列を@に置き換える</span>
<span class="nb">print</span><span class="p">(</span><span class="n">str1</span><span class="p">)</span><span class="c1"># \(と\)の意味については、下記の「正規表現のエスケープシーケンス」の節を参照してください</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0x-5x5x-x828x
He has three pets a cat a dog and a giraffe doesn&#39;t he
accountname@test.ecc.u-tokyo.ac.jp
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:5: SyntaxWarning: invalid escape sequence &#39;\(&#39;
&lt;&gt;:5: SyntaxWarning: invalid escape sequence &#39;\(&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/2703320260.py:5: SyntaxWarning: invalid escape sequence &#39;\(&#39;
  str1 = re.sub(&#39;\(a\)|あっとまーく|＠&#39;, &#39;@&#39;, &#39;accountnameあっとまーくtest.ecc.u-tokyo.ac.jp&#39;) # スパム回避の文字列を@に置き換える
</pre></div></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>re.sub(r&#39;[ \t\n][ \t\n]*&#39;, &#39; &#39;, str1)
</pre></div>
</div>
<p>とすると、文字列 <code class="docutils literal notranslate"><span class="pre">str1</span></code> の空白文字の並びがスペース1個に置き換わります。</p>
<p>ここで、<code class="docutils literal notranslate"><span class="pre">r'[</span> <span class="pre">\t\n][</span> <span class="pre">\t\n]*'</span></code> という正規表現は、空白かタブか改行の<strong>1回以上</strong>の繰り返しのパターンを表します。つまり、<code class="docutils literal notranslate"><span class="pre">aa*</span></code> という形をした「1回以上の <code class="docutils literal notranslate"><span class="pre">a</span></code> という文字列とマッチする正規表現」は <code class="docutils literal notranslate"><span class="pre">a+</span></code> という <code class="docutils literal notranslate"><span class="pre">+</span></code> を使った正規表現で置き換えることが可能です。この <code class="docutils literal notranslate"><span class="pre">+</span></code> は後で正式に紹介します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[ \t\n][ \t\n]*&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;Hello,</span><span class="se">\n</span><span class="s1">    World!</span><span class="se">\t</span><span class="s1">How are you?&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;Hello, World! How are you?&#39;
</pre></div></div>
</div>
<p>以下では、HTMLやXMLのタグを消しています（空文字列に置き換えています）。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;[^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;body&gt;</span><span class="se">\n</span><span class="s1">Click &lt;a href=&quot;a.href&quot;&gt;this&lt;/a&gt;</span><span class="se">\n</span><span class="s1">&lt;/body&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;\nClick this\n\n&#39;
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">r'&lt;[^&gt;]*&gt;'</span></code> という正規表現は、<code class="docutils literal notranslate"><span class="pre">&lt;</span></code> の後に <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> 以外の文字の繰り返しがあって最後に <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> が来るというパターンを表します。</p>
</section>
<section id="re.split">
<h3><code class="docutils literal notranslate"><span class="pre">re.split</span></code><a class="headerlink" href="#re.split" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">split</span></code> は、<code class="docutils literal notranslate"><span class="pre">正規表現R</span></code> にマッチする文字列を区切り文字（デリミタ）として、<code class="docutils literal notranslate"><span class="pre">文字列A</span></code> を分割します。分割された文字列がリストに格納されて返値となります。</p>
<p>具体的には次のように用います。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>re.split(正規表現R, 元になる文字列A)
</pre></div>
</div>
<p>以下が典型例です。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>re.split(r&#39;[^a-zA-Z][^a-zA-Z]*&#39;, &#39;Hello, World! How are you?&#39;)
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">[^a-zA-Z][^a-zA-Z]*</span></code> という正規表現は、英文字以外の文字が1回以上繰り返されている、というパターンを表します。 この正規表現を Python の式の中で用いるときは、<code class="docutils literal notranslate"><span class="pre">r'[^a-zA-Z][^a-zA-Z]*'</span></code> という構文を用います。 先頭の <code class="docutils literal notranslate"><span class="pre">r</span></code> については、以下の説明を参照してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s2">&quot;He has three pets a cat a dog and a giraffe doesn&#39;t he&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span>
<span class="n">list2</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^a-zA-Z][^a-zA-Z]*&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello, World! How are you?&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;He&#39;, &#39;has&#39;, &#39;three&#39;, &#39;pets&#39;, &#39;a&#39;, &#39;cat&#39;, &#39;a&#39;, &#39;dog&#39;, &#39;and&#39;, &#39;a&#39;, &#39;giraffe&#39;, &#34;doesn&#39;t&#34;, &#39;he&#39;]
[&#39;Hello&#39;, &#39;World&#39;, &#39;How&#39;, &#39;are&#39;, &#39;you&#39;, &#39;&#39;]
</pre></div></div>
</div>
<p>この例のように、返されたリストに空文字列が含まれる場合がありますので、注意してください。</p>
</section>
<section id="r-を付ける理由">
<h3><code class="docutils literal notranslate"><span class="pre">r</span></code> を付ける理由<a class="headerlink" href="#r-を付ける理由" title="Link to this heading">¶</a></h3>
<p>さて、以上のような正規表現は、<code class="docutils literal notranslate"><span class="pre">'hello*'</span></code> のようにPythonの文字列として <code class="docutils literal notranslate"><span class="pre">re.split</span></code> や <code class="docutils literal notranslate"><span class="pre">re.sub</span></code> などの関数に与えればよいのですが、 以下のように文字列の前に <code class="docutils literal notranslate"><span class="pre">r</span></code> を付けることが推奨されます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sa">r</span><span class="s1">&#39;hello*&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;hello*&#39;
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">r'hello*'</span></code> の場合は <code class="docutils literal notranslate"><span class="pre">r</span></code> を付けても付けなくても同じなのですが、 以下のように <code class="docutils literal notranslate"><span class="pre">r</span></code> を付けるとエスケープすべき文字がエスケープシーケンスになった文字列が得られます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sa">r</span><span class="s1">&#39;[ \t\n]+&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;[ \\t\\n]+&#39;
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">\t</span></code> が <code class="docutils literal notranslate"><span class="pre">\\t</span></code> に変わったことでしょう。<code class="docutils literal notranslate"><span class="pre">\\</span></code> はバックスラッシュを表すエスケープシーケンスです。 <code class="docutils literal notranslate"><span class="pre">\t</span></code> はタブという文字を表しますが、<code class="docutils literal notranslate"><span class="pre">\\t</span></code> はバックススラッシュと <code class="docutils literal notranslate"><span class="pre">t</span></code> という2文字から成る文字列です。 この場合、正規表現を解釈する段階でバックスラッシュが処理されます。</p>
<p>特に <code class="docutils literal notranslate"><span class="pre">\</span></code> という文字そのものを正規表現に含めたいときは <code class="docutils literal notranslate"><span class="pre">\\</span></code> と書いた上で <code class="docutils literal notranslate"><span class="pre">r</span></code> を付けてください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sa">r</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">t t/&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;\\\\t t/&#39;
</pre></div></div>
</div>
<p>この場合、文字列の中に <code class="docutils literal notranslate"><span class="pre">\</span></code> が2個含まれており、正規表現を解釈する段階で正しく処理されます。すなわち、<code class="docutils literal notranslate"><span class="pre">\</span></code> という文字そのものを表します。</p>
</section>
</section>
<section id="id10">
<h2>練習<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h2>
<p>英語の文書が保存された <code class="docutils literal notranslate"><span class="pre">text-sample.txt</span></code> というファイルから読み込み、出現する単語のリストを返す関数 <code class="docutils literal notranslate"><span class="pre">get_engsentences</span></code> を作成してください。 ただし、<strong>重複する単語を削除してはいけません</strong>が、空文字列は除きます。また、リストは返す前に中身を昇順に並べ替えてください。</p>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">get_engsentences</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[41], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list1</span> <span class="o">=</span> <span class="n">get_engsentences</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">289</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list1</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;in&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list1</span><span class="p">[</span><span class="mi">288</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;would&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[42], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> list1 <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">get_engsentences</span>()
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(<span style="color: rgb(0,135,0)">len</span>(list1) <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(98,98,98)">289</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(list1[<span style="color: rgb(98,98,98)">0</span>] <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">a</span><span style="color: rgb(175,0,0)">&#39;</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;get_engsentences&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="id11">
<h2>練習<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h2>
<p>英語の文書が保存された <code class="docutils literal notranslate"><span class="pre">text-sample.txt</span></code> というファイルから読み込み、出現する単語のリストを返す関数 <code class="docutils literal notranslate"><span class="pre">get_engsentences2</span></code> を作成してください。 ただし、空文字列は除きます。また、リストは返す前に中身を昇順に並べ替えてください。</p>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">get_engsentences2</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[43], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list1</span> <span class="o">=</span> <span class="n">get_engsentences2</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">149</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list1</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;proclaim&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list1</span><span class="p">[</span><span class="mi">148</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;would&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[44], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> list1 <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">get_engsentences2</span>()
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(<span style="color: rgb(0,135,0)">len</span>(list1) <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(98,98,98)">149</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(list1[<span style="color: rgb(98,98,98)">0</span>] <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">a</span><span style="color: rgb(175,0,0)">&#39;</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;get_engsentences2&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="その他の反復演算">
<h2>その他の反復演算<a class="headerlink" href="#その他の反復演算" title="Link to this heading">¶</a></h2>
<p>閉包以外の反復演算を説明します。</p>
<p><code class="docutils literal notranslate"><span class="pre">a?</span></code> は、正規表現 <code class="docutils literal notranslate"><span class="pre">a</span></code> を高々1回反復する文字列とマッチします。たとえば、<code class="docutils literal notranslate"><span class="pre">a(bc)?</span></code> は <code class="docutils literal notranslate"><span class="pre">a|abc</span></code> と同じ意味の正規表現です。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;colou?r&#39;</span><span class="p">,</span> <span class="s1">&#39;colour&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;colou?r&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 6), match=&#39;colour&#39;&gt;
&lt;re.Match object; span=(0, 5), match=&#39;color&#39;&gt;
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">a+</span></code> は、正規表現 <code class="docutils literal notranslate"><span class="pre">a</span></code> を1回以上反復する文字列とマッチします。つまり、<code class="docutils literal notranslate"><span class="pre">a+</span></code> は <code class="docutils literal notranslate"><span class="pre">aa*</span></code> と同じ意味の正規表現です。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;boo+&#39;</span><span class="p">,</span> <span class="s1">&#39;boooo!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;boo+&#39;</span><span class="p">,</span> <span class="s1">&#39;bo!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a+&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a+&#39;</span><span class="p">,</span> <span class="s1">&#39;aabbcc&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a+&#39;</span><span class="p">,</span> <span class="s1">&#39;cde&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[^a-zA-Z]+&#39;</span><span class="p">,</span> <span class="s1">&#39;abc12345efg67hi89j0k&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[a-zA-Z]+&#39;</span><span class="p">,</span> <span class="s1">&#39;abc12345efg67hi89j0k&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 5), match=&#39;boooo&#39;&gt;
None
&lt;re.Match object; span=(0, 1), match=&#39;a&#39;&gt;
&lt;re.Match object; span=(0, 2), match=&#39;aa&#39;&gt;
None
&lt;re.Match object; span=(3, 8), match=&#39;12345&#39;&gt;
&lt;re.Match object; span=(0, 3), match=&#39;abc&#39;&gt;
</pre></div></div>
</div>
<p>上記の例を <code class="docutils literal notranslate"><span class="pre">*</span></code> を使う形に書き換えてみてください。</p>
<p><code class="docutils literal notranslate"><span class="pre">a{x,y}</span></code>、は正規表現 <code class="docutils literal notranslate"><span class="pre">a</span></code> を <code class="docutils literal notranslate"><span class="pre">x</span></code> 回以上かつ <code class="docutils literal notranslate"><span class="pre">y</span></code> 回以下繰り返す文字列とマッチします。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;bo{3,5}&#39;</span><span class="p">,</span> <span class="s1">&#39;booooooo!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;bo{3,5}&#39;</span><span class="p">,</span> <span class="s1">&#39;boo!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a{2,5}&#39;</span><span class="p">,</span> <span class="s1">&#39;bacaad&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[0-9]{1,3},[0-9]{3,3}&#39;</span><span class="p">,</span> <span class="s1">&#39;1,298円&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[0-9]{1,3},[0-9]{3,3}&#39;</span><span class="p">,</span> <span class="s1">&#39;298円&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 6), match=&#39;booooo&#39;&gt;
None
&lt;re.Match object; span=(3, 5), match=&#39;aa&#39;&gt;
&lt;re.Match object; span=(0, 5), match=&#39;1,298&#39;&gt;
None
</pre></div></div>
</div>
</section>
<section id="メタ文字">
<h2>メタ文字<a class="headerlink" href="#メタ文字" title="Link to this heading">¶</a></h2>
<p>以下では、良く使うメタ文字（特殊文字）を紹介します。</p>
<p><code class="docutils literal notranslate"><span class="pre">.</span></code>（ピリオド）は、あらゆる文字にマッチします。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;3.*9&#39;</span><span class="p">,</span> <span class="s1">&#39;1234567890&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ha(.|..)&#39;</span><span class="p">,</span> <span class="s1">&#39;He has an apple and they have pineapples.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 1), match=&#39;H&#39;&gt;
&lt;re.Match object; span=(2, 9), match=&#39;3456789&#39;&gt;
&lt;re.Match object; span=(3, 6), match=&#39;has&#39;&gt;
</pre></div></div>
</div>
<p>ただし、文字クラスの中で <code class="docutils literal notranslate"><span class="pre">.</span></code> を用いても、あらゆる文字とはマッチせず、<code class="docutils literal notranslate"><span class="pre">*</span></code> の場合と同様に、ピリオドとマッチします。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[.]&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;[.]&#39;</span><span class="p">,</span> <span class="s1">&#39;3.141592&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
None
&lt;re.Match object; span=(1, 2), match=&#39;.&#39;&gt;
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">\t</span></code> は タブを表します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;b</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;a        b       c       d&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(2, 4), match=&#39;b\t&#39;&gt;
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">\s</span></code> は<strong>空白文字</strong>（スペース、タブ、改行など）を表します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;b\s&#39;</span><span class="p">,</span> <span class="s1">&#39;a        b       c       d&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a\s\s\s&#39;</span><span class="p">,</span> <span class="s1">&#39;a    　 b     　c      d&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;b\s*&#39;</span><span class="p">,</span> <span class="s1">&#39;a       　 b     　c      d&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(2, 4), match=&#39;b\t&#39;&gt;
&lt;re.Match object; span=(0, 4), match=&#39;a\t\u3000 &#39;&gt;
&lt;re.Match object; span=(4, 7), match=&#39;b\t\u3000&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\s&#39;
&lt;&gt;:3: SyntaxWarning: invalid escape sequence &#39;\s&#39;
&lt;&gt;:5: SyntaxWarning: invalid escape sequence &#39;\s&#39;
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\s&#39;
&lt;&gt;:3: SyntaxWarning: invalid escape sequence &#39;\s&#39;
&lt;&gt;:5: SyntaxWarning: invalid escape sequence &#39;\s&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/1235538076.py:1: SyntaxWarning: invalid escape sequence &#39;\s&#39;
  match1 = re.search(&#39;b\s&#39;, &#39;a      b       c       d&#39;)
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/1235538076.py:3: SyntaxWarning: invalid escape sequence &#39;\s&#39;
  match1 = re.search(&#39;a\s\s\s&#39;, &#39;a  　 b     　c      d&#39;)
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/1235538076.py:5: SyntaxWarning: invalid escape sequence &#39;\s&#39;
  match1 = re.search(&#39;b\s*&#39;, &#39;a     　 b     　c      d&#39;)
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">\S</span></code> は <code class="docutils literal notranslate"><span class="pre">\s</span></code> 以外の全ての文字を表します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;b\S&#39;</span><span class="p">,</span> <span class="s1">&#39;a        b       bc      d&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(4, 6), match=&#39;bc&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\S&#39;
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\S&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/3290421489.py:1: SyntaxWarning: invalid escape sequence &#39;\S&#39;
  match1 = re.search(&#39;b\S&#39;, &#39;a      b       bc      d&#39;)
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">\w</span></code> は <code class="docutils literal notranslate"><span class="pre">[a-zA-Z0-9_]</span></code> と同じ意味です。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\w\w&#39;</span><span class="p">,</span> <span class="s1">&#39;abcde&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;b\w*g&#39;</span><span class="p">,</span> <span class="s1">&#39;abcdefgh&#39;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 2), match=&#39;ab&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\w&#39;
&lt;&gt;:3: SyntaxWarning: invalid escape sequence &#39;\w&#39;
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\w&#39;
&lt;&gt;:3: SyntaxWarning: invalid escape sequence &#39;\w&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/3891737031.py:1: SyntaxWarning: invalid escape sequence &#39;\w&#39;
  match1 = re.search(&#39;\w\w&#39;, &#39;abcde&#39;)
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/3891737031.py:3: SyntaxWarning: invalid escape sequence &#39;\w&#39;
  match1 = re.search(&#39;b\w*g&#39;, &#39;abcdefgh&#39;)
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">\W</span></code> は <code class="docutils literal notranslate"><span class="pre">\w</span></code> 以外の全ての文字を表します。すなわち、<code class="docutils literal notranslate"><span class="pre">[^a-zA-Z0-9_]</span></code> と同じ意味です。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;g\W*&#39;</span><span class="p">,</span> <span class="s1">&#39;ab defg  hi jklm no p&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\W\w*\W&#39;</span><span class="p">,</span> <span class="s1">&#39;ab defg  hi jklm no p&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(6, 9), match=&#39;g  &#39;&gt;
&lt;re.Match object; span=(2, 8), match=&#39; defg &#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\W&#39;
&lt;&gt;:3: SyntaxWarning: invalid escape sequence &#39;\W&#39;
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\W&#39;
&lt;&gt;:3: SyntaxWarning: invalid escape sequence &#39;\W&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/3446286968.py:1: SyntaxWarning: invalid escape sequence &#39;\W&#39;
  match1 = re.search(&#39;g\W*&#39;, &#39;ab defg  hi jklm no p&#39;)
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/3446286968.py:3: SyntaxWarning: invalid escape sequence &#39;\W&#39;
  match1 = re.search(&#39;\W\w*\W&#39;, &#39;ab defg  hi jklm no p&#39;)
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">\d</span></code> は <code class="docutils literal notranslate"><span class="pre">[0-9]</span></code> と同じ意味です。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\d\d\d-\d\d\d\d&#39;</span><span class="p">,</span> <span class="s1">&#39;153-8902&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\d*-\d*&#39;</span><span class="p">,</span> <span class="s1">&#39;153-8902&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\d\d-\d\d\d\d-\d\d\d\d&#39;</span><span class="p">,</span> <span class="s1">&#39;03-5454-6828&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\d*-\d*-\d*&#39;</span><span class="p">,</span> <span class="s1">&#39;03-5454-6828&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 8), match=&#39;153-8902&#39;&gt;
&lt;re.Match object; span=(0, 8), match=&#39;153-8902&#39;&gt;
&lt;re.Match object; span=(0, 12), match=&#39;03-5454-6828&#39;&gt;
&lt;re.Match object; span=(0, 12), match=&#39;03-5454-6828&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:3: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:5: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:7: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:3: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:5: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:7: SyntaxWarning: invalid escape sequence &#39;\d&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/3067726332.py:1: SyntaxWarning: invalid escape sequence &#39;\d&#39;
  match1 = re.search(&#39;\d\d\d-\d\d\d\d&#39;, &#39;153-8902&#39;)
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/3067726332.py:3: SyntaxWarning: invalid escape sequence &#39;\d&#39;
  match1 = re.search(&#39;\d*-\d*&#39;, &#39;153-8902&#39;)
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/3067726332.py:5: SyntaxWarning: invalid escape sequence &#39;\d&#39;
  match1 = re.search(&#39;\d\d-\d\d\d\d-\d\d\d\d&#39;, &#39;03-5454-6828&#39;)
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/3067726332.py:7: SyntaxWarning: invalid escape sequence &#39;\d&#39;
  match1 = re.search(&#39;\d*-\d*-\d*&#39;, &#39;03-5454-6828&#39;)
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">\D</span></code> は <code class="docutils literal notranslate"><span class="pre">\d</span></code> 以外の全ての文字を表します。すなわち、<code class="docutils literal notranslate"><span class="pre">[^0-9]</span></code> と同じ意味です。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[56]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\D*&#39;</span><span class="p">,</span> <span class="s1">&#39;He has 10 apples.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;re.Match object; span=(0, 7), match=&#39;He has &#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\D&#39;
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\D&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/174792290.py:1: SyntaxWarning: invalid escape sequence &#39;\D&#39;
  match1 = re.search(&#39;\D*&#39;, &#39;He has 10 apples.&#39;)
</pre></div></div>
</div>
</section>
<section id="id14">
<h2>練習<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h2>
<p>文字列から数字列を切り出して、それを整数とみなして足し合せた結果を整数として返す関数 <code class="docutils literal notranslate"><span class="pre">sumnumbers</span></code> を定義してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">sumnumbers</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[57], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sumnumbers</span><span class="p">(</span><span class="s1">&#39; 2  33 45, 67.9&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">156</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[58], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">sumnumbers</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)"> 2  33 45, 67.9</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(98,98,98)">156</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;sumnumbers&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="id15">
<h2>練習<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h2>
<p>文字列 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を引数として取り、<code class="docutils literal notranslate"><span class="pre">str1</span></code> を構成する文字列が <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">C</span></code>, <code class="docutils literal notranslate"><span class="pre">G</span></code>, <code class="docutils literal notranslate"><span class="pre">T</span></code> の4種類の文字以外の文字を含むかどうか調べて、これら以外を含む場合は <code class="docutils literal notranslate"><span class="pre">False</span></code>、そうでない場合は <code class="docutils literal notranslate"><span class="pre">True</span></code> を返す関数 <code class="docutils literal notranslate"><span class="pre">check_ACGTstr</span></code> を作成してください。 ただし、大文字と小文字は区別しません。また、空列の場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> を返してください。</p>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[59]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">check_ACGTstr</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[59], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が全て <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">check_ACGTstr</span><span class="p">(</span><span class="s1">&#39;AcCGTAGCacATcGgAaaTtGCacT&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_ACGTstr</span><span class="p">(</span><span class="s1">&#39;:ACaacgta24FgtGH&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_ACGTstr</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[60], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">check_ACGTstr</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">AcCGTAGCacATcGgAaaTtGCacT</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">True</span>)
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(check_ACGTstr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">:ACaacgta24FgtGH</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">False</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(check_ACGTstr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">False</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;check_ACGTstr&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="id16">
<h2>練習<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h2>
<p>文字列 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を引数として取り、 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を構成する文字列が「日本の郵便番号」を表す文字列になっている場合は、 <code class="docutils literal notranslate"><span class="pre">True</span></code> を返し、そうでない場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> を返す関数 <code class="docutils literal notranslate"><span class="pre">check_postalcode</span></code> を作成してください。 ただし、「日本の郵便番号」は <code class="docutils literal notranslate"><span class="pre">abc-defg</span></code> という形になっており、<code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">f</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code> はそれぞれ <code class="docutils literal notranslate"><span class="pre">0</span></code> から <code class="docutils literal notranslate"><span class="pre">9</span></code> までの値になっています。</p>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[61]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">check_postalcode</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[61], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が全て <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">check_postalcode</span><span class="p">(</span><span class="s1">&#39;113-8654&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_postalcode</span><span class="p">(</span><span class="s1">&#39;119-110&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_postalcode</span><span class="p">(</span><span class="s1">&#39;abc-defg&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_postalcode</span><span class="p">(</span><span class="s1">&#39;〒153-0041&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_postalcode</span><span class="p">(</span><span class="s1">&#39;113-86547&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[62], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">check_postalcode</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">113-8654</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">True</span>)
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(check_postalcode(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">119-110</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">False</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(check_postalcode(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">abc-defg</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">False</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;check_postalcode&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="id17">
<h2>練習<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h2>
<p>文字列 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を引数として取り、<code class="docutils literal notranslate"><span class="pre">str1</span></code> を構成する文字列が「本郷の内線番号」を表す文字列になっている場合は、 <code class="docutils literal notranslate"><span class="pre">True</span></code> を返し、そうでない場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> を返す関数 <code class="docutils literal notranslate"><span class="pre">check_extension</span></code> を作成してください。 ただし、「本郷の内線番号」は <code class="docutils literal notranslate"><span class="pre">2abcd</span></code> という形になっており、<code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code> はそれぞれ <code class="docutils literal notranslate"><span class="pre">0</span></code> から <code class="docutils literal notranslate"><span class="pre">9</span></code> までの値になっています。</p>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[63]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">check_extension</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[63], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が全て <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">check_extension</span><span class="p">(</span><span class="s1">&#39;24115&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_extension</span><span class="p">(</span><span class="s1">&#39;46858&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_extension</span><span class="p">(</span><span class="s1">&#39;☎46666&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_extension</span><span class="p">(</span><span class="s1">&#39;467890&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[64], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">check_extension</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">24115</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">True</span>)
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(check_extension(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">46858</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">False</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(check_extension(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">☎46666</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">False</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;check_extension&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="正規表現のエスケープシーケンス">
<h2>正規表現のエスケープシーケンス<a class="headerlink" href="#正規表現のエスケープシーケンス" title="Link to this heading">¶</a></h2>
<p>丸括弧 <code class="docutils literal notranslate"><span class="pre">()</span></code> や演算子 (<code class="docutils literal notranslate"><span class="pre">|</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>) など正規表現の中で特殊な役割を果たす記号のマッチを行いたい場合、文字列のエスケープシーケンスのように <code class="docutils literal notranslate"><span class="pre">\</span></code> を前につけてやる必要があります。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[65]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;03(5454)6666&#39;</span><span class="p">,</span> <span class="s1">&#39;03(5454)6666&#39;</span><span class="p">)</span> <span class="c1">#電話番号。つけないと丸括弧として扱われないのでマッチしない</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;03(5454)6666&#39;</span><span class="p">,</span> <span class="s1">&#39;0354546666&#39;</span><span class="p">)</span> <span class="c1"># 括弧が含まれない文字列にマッチ</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;03\(5454\)6666&#39;</span><span class="p">,</span> <span class="s1">&#39;03(5454)6666&#39;</span><span class="p">)</span> <span class="c1"># \(と\)で左右の丸括弧として扱われるのでマッチする</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;3*4+5=17&#39;</span><span class="p">,</span> <span class="s1">&#39;3*4+5=17&#39;</span><span class="p">)</span> <span class="c1">#計算式。*と+が演算子扱いされているのでマッチしない</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;3*4+5=17&#39;</span><span class="p">,</span> <span class="s1">&#39;33345=17&#39;</span><span class="p">)</span> <span class="c1">#\がないと、たとえば、このような文字列とマッチする</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;3\*4\+5=17&#39;</span><span class="p">,</span> <span class="s1">&#39;3*4+5=17&#39;</span><span class="p">)</span> <span class="c1">#意図した文字列にマッチ</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;|ω・`）チラ &#39;</span><span class="p">,</span> <span class="s1">&#39;|ω・`）チラ &#39;</span><span class="p">)</span> <span class="c1">#顔文字。 空列にマッチしてしまう</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;\|ω・`）チラ &#39;</span><span class="p">,</span> <span class="s1">&#39;|ω・`）チラ &#39;</span><span class="p">)</span> <span class="c1">#意図した文字列にマッチ</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
None
&lt;re.Match object; span=(0, 10), match=&#39;0354546666&#39;&gt;
&lt;re.Match object; span=(0, 12), match=&#39;03(5454)6666&#39;&gt;
None
&lt;re.Match object; span=(0, 8), match=&#39;33345=17&#39;&gt;
&lt;re.Match object; span=(0, 8), match=&#39;3*4+5=17&#39;&gt;
&lt;re.Match object; span=(0, 0), match=&#39;&#39;&gt;
&lt;re.Match object; span=(0, 8), match=&#39;|ω・`）チラ &#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:5: SyntaxWarning: invalid escape sequence &#39;\(&#39;
&lt;&gt;:11: SyntaxWarning: invalid escape sequence &#39;\*&#39;
&lt;&gt;:15: SyntaxWarning: invalid escape sequence &#39;\|&#39;
&lt;&gt;:5: SyntaxWarning: invalid escape sequence &#39;\(&#39;
&lt;&gt;:11: SyntaxWarning: invalid escape sequence &#39;\*&#39;
&lt;&gt;:15: SyntaxWarning: invalid escape sequence &#39;\|&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/4112574947.py:5: SyntaxWarning: invalid escape sequence &#39;\(&#39;
  match1 = re.search(&#39;03\(5454\)6666&#39;, &#39;03(5454)6666&#39;) # \(と\)で左右の丸括弧として扱われるのでマッチする
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/4112574947.py:11: SyntaxWarning: invalid escape sequence &#39;\*&#39;
  match1 = re.search(&#39;3\*4\+5=17&#39;, &#39;3*4+5=17&#39;) #意図した文字列にマッチ
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/4112574947.py:15: SyntaxWarning: invalid escape sequence &#39;\|&#39;
  match1 = re.search(&#39;\|ω・`）チラ &#39;, &#39;|ω・`）チラ &#39;) #意図した文字列にマッチ
</pre></div></div>
</div>
<p>特殊な意味を持つ記号は次の14個です。</p>
<p><code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">^</span> <span class="pre">$</span> <span class="pre">*</span> <span class="pre">+</span> <span class="pre">?</span> <span class="pre">{</span> <span class="pre">}</span> <span class="pre">[</span> <span class="pre">]</span> <span class="pre">\</span> <span class="pre">|</span> <span class="pre">(</span> <span class="pre">)</span></code></p>
<p>これらの特殊記号が含まれる場合（かつ意図したマッチの結果が得られない場合）には、エスケープシーケンスを使う（エスケープする）べき（可能性がある）ことも考慮に入れておいてください。</p>
</section>
<section id="正規表現に関する関数とメソッド">
<h2>正規表現に関する関数とメソッド<a class="headerlink" href="#正規表現に関する関数とメソッド" title="Link to this heading">¶</a></h2>
<p>以下では更に幾つかの関数とメソッドを紹介します。</p>
<section id="findall">
<h3><code class="docutils literal notranslate"><span class="pre">findall</span></code><a class="headerlink" href="#findall" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">findall</span></code> は、<code class="docutils literal notranslate"><span class="pre">正規表現R</span></code> にマッチする <code class="docutils literal notranslate"><span class="pre">文字列A</span></code> 中の全ての文字列を、リストに格納して返します。</p>
<p>具体的には次のように実行します。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>re.findall(正規表現R, 文字列A)
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;had&#39;</span><span class="p">,</span> <span class="s1">&#39;James while John had had had had had had had had had had had a better effect on the teacher.&#39;</span><span class="p">)</span>
<span class="c1">#James, while John had had &#39;had&#39;, had had &#39;had had&#39;; &#39;had had&#39; had had a better effect on the teacher.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span> <span class="c1">#全てのhadを抜き出す</span>
<span class="n">list1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;p[^ .]*&#39;</span><span class="p">,</span> <span class="s1">&#39;Peter Piper picked a peck of pickled peppers.&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span><span class="c1"># pで始まる全ての単語を取得する, 大文字小文字を区別しない</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;had&#39;, &#39;had&#39;, &#39;had&#39;, &#39;had&#39;, &#39;had&#39;, &#39;had&#39;, &#39;had&#39;, &#39;had&#39;, &#39;had&#39;, &#39;had&#39;, &#39;had&#39;]
[&#39;Peter&#39;, &#39;Piper&#39;, &#39;picked&#39;, &#39;peck&#39;, &#39;pickled&#39;, &#39;peppers&#39;]
</pre></div></div>
</div>
</section>
<section id="finditer">
<h3><code class="docutils literal notranslate"><span class="pre">finditer</span></code><a class="headerlink" href="#finditer" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">finditer</span></code> は、<code class="docutils literal notranslate"><span class="pre">正規表現R</span></code> にマッチする <code class="docutils literal notranslate"><span class="pre">文字列A</span></code> 中の全ての matchオブジェクトを、特殊なリスト（のようなもの）に格納して返します。</p>
<p>具体的には次のように実行します。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>re.finditer(正規表現R, 文字列A)
</pre></div>
</div>
<p>返値は特殊なリスト（のようなもの）であり、for文の <code class="docutils literal notranslate"><span class="pre">in</span></code> の後ろに置いて使ってください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[67]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;1:正規表現 had の結果：&#39;</span><span class="p">)</span>
<span class="n">iter1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s1">&#39;had&#39;</span><span class="p">,</span> <span class="s1">&#39;James while John had had had had had had had had had had had a better effect on the teacher.&#39;</span><span class="p">)</span>
<span class="c1">#James, while John had had &#39;had&#39;, had had &#39;had had&#39;; &#39;had had&#39; had had a better effect on the teacher.</span>
<span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">iter1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="p">)</span> <span class="c1">#全てのhadを抜き出す</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;2:正規表現 p[^ .]* の結果：&#39;</span><span class="p">)</span>
<span class="n">iter1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s1">&#39;p[^ .]*&#39;</span><span class="p">,</span> <span class="s1">&#39;Peter Piper picked a peck of pickled peppers.&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
<span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">iter1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="p">)</span><span class="c1"># pで始まる全ての単語を取得する, 大文字小文字を区別しない</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1:正規表現 had の結果：
&lt;re.Match object; span=(17, 20), match=&#39;had&#39;&gt;
&lt;re.Match object; span=(21, 24), match=&#39;had&#39;&gt;
&lt;re.Match object; span=(25, 28), match=&#39;had&#39;&gt;
&lt;re.Match object; span=(29, 32), match=&#39;had&#39;&gt;
&lt;re.Match object; span=(33, 36), match=&#39;had&#39;&gt;
&lt;re.Match object; span=(37, 40), match=&#39;had&#39;&gt;
&lt;re.Match object; span=(41, 44), match=&#39;had&#39;&gt;
&lt;re.Match object; span=(45, 48), match=&#39;had&#39;&gt;
&lt;re.Match object; span=(49, 52), match=&#39;had&#39;&gt;
&lt;re.Match object; span=(53, 56), match=&#39;had&#39;&gt;
&lt;re.Match object; span=(57, 60), match=&#39;had&#39;&gt;
2:正規表現 p[^ .]* の結果：
&lt;re.Match object; span=(0, 5), match=&#39;Peter&#39;&gt;
&lt;re.Match object; span=(6, 11), match=&#39;Piper&#39;&gt;
&lt;re.Match object; span=(12, 18), match=&#39;picked&#39;&gt;
&lt;re.Match object; span=(21, 25), match=&#39;peck&#39;&gt;
&lt;re.Match object; span=(29, 36), match=&#39;pickled&#39;&gt;
&lt;re.Match object; span=(37, 44), match=&#39;peppers&#39;&gt;
</pre></div></div>
</div>
</section>
<section id="group">
<h3><code class="docutils literal notranslate"><span class="pre">group</span></code><a class="headerlink" href="#group" title="Link to this heading">¶</a></h3>
<p>matchオブジェクトのメソッド <code class="docutils literal notranslate"><span class="pre">group</span></code> は、正規表現にマッチした文字列を（部分的に）取り出します。正規表現内に丸括弧を用いると、括弧内の正規表現とマッチした文字列を取得できるようになっています。なお、<code class="docutils literal notranslate"><span class="pre">group</span></code> によるこの操作を、括弧内の文字列を<strong>キャプチャ</strong>するといいます。</p>
<p><code class="docutils literal notranslate"><span class="pre">i</span></code> 番目のキャプチャした値を取得するには次のようにします。<code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">=</span> <span class="pre">0</span></code> の場合は、マッチした文字列全体を取得できます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>matchオブジェクト.group(i)
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;03-5454-(\d\d\d\d)&#39;</span><span class="p">,</span> <span class="s1">&#39;03-5454-6666&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;マッチした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s1">&#39; キャプチャした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="c1"># 内線番号の取得</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;([^@]*)@[^.]*(\.[^.]*)?\.u-tokyo\.ac\.jp&#39;</span><span class="p">,</span> <span class="s1">&#39;accountname@test.ecc.u-tokyo.ac.jp&#39;</span><span class="p">)</span> <span class="c1"># \.はピリオドを表します</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;マッチした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s1">&#39; キャプチャした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="c1"># アカウント名の取得</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;([^@]*)@[^.]*(\.[^.]*)?\.u-tokyo\.ac\.jp&#39;</span><span class="p">,</span> <span class="s1">&#39;accountname@test.u-tokyo.ac.jp&#39;</span><span class="p">)</span> <span class="c1"># \.はピリオドを表します</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;マッチした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s1">&#39; キャプチャした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="c1"># アカウント名の取得</span>
<span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;href=</span><span class="se">\&quot;</span><span class="s2">([^</span><span class="se">\&quot;</span><span class="s2">]*)</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&lt;a href=&quot;http://www.u-tokyo.ac.jp&quot; target=&quot;_blank&quot;&gt;U-Tokyo&lt;/a&gt;&#39;</span><span class="p">)</span><span class="c1"># \&quot;はダブルクォートを表します</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;マッチした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s1">&#39; キャプチャした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="c1"># リンク先URLの取得</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
マッチした文字列= 03-5454-6666  キャプチャした文字列= 6666
マッチした文字列= accountname@test.ecc.u-tokyo.ac.jp  キャプチャした文字列= accountname
マッチした文字列= accountname@test.u-tokyo.ac.jp  キャプチャした文字列= accountname
マッチした文字列= href=&#34;http://www.u-tokyo.ac.jp&#34;  キャプチャした文字列= http://www.u-tokyo.ac.jp
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:2: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:4: SyntaxWarning: invalid escape sequence &#39;\.&#39;
&lt;&gt;:6: SyntaxWarning: invalid escape sequence &#39;\.&#39;
&lt;&gt;:2: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:4: SyntaxWarning: invalid escape sequence &#39;\.&#39;
&lt;&gt;:6: SyntaxWarning: invalid escape sequence &#39;\.&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/2781033459.py:2: SyntaxWarning: invalid escape sequence &#39;\d&#39;
  match1 = re.search(&#39;03-5454-(\d\d\d\d)&#39;, &#39;03-5454-6666&#39;)
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/2781033459.py:4: SyntaxWarning: invalid escape sequence &#39;\.&#39;
  match1 = re.search(&#39;([^@]*)@[^.]*(\.[^.]*)?\.u-tokyo\.ac\.jp&#39;, &#39;accountname@test.ecc.u-tokyo.ac.jp&#39;) # \.はピリオドを表します
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/2781033459.py:6: SyntaxWarning: invalid escape sequence &#39;\.&#39;
  match1 = re.search(&#39;([^@]*)@[^.]*(\.[^.]*)?\.u-tokyo\.ac\.jp&#39;, &#39;accountname@test.u-tokyo.ac.jp&#39;) # \.はピリオドを表します
</pre></div></div>
</div>
<p>マッチに失敗した場合は、matchオブジェクトが返らずに <code class="docutils literal notranslate"><span class="pre">None</span></code> が返るので、それを確かめずに <code class="docutils literal notranslate"><span class="pre">group</span></code> を使おうとするとエラーが出ますので注意してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[69]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;03-5454-(\d\d\d\d)&#39;</span><span class="p">,</span> <span class="s1">&#39;03-5454-666&#39;</span><span class="p">)</span> <span class="c1">#マッチしない文字列</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;マッチした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s1">&#39; キャプチャした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\d&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/778018344.py:1: SyntaxWarning: invalid escape sequence &#39;\d&#39;
  match1 = re.search(&#39;03-5454-(\d\d\d\d)&#39;, &#39;03-5454-666&#39;) #マッチしない文字列
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/778018344.py:1: SyntaxWarning: invalid escape sequence &#39;\d&#39;
  match1 = re.search(&#39;03-5454-(\d\d\d\d)&#39;, &#39;03-5454-666&#39;) #マッチしない文字列
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[69], line 2</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> match1 <span style="color: rgb(98,98,98)">=</span> re<span style="color: rgb(98,98,98)">.</span>search(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">03-5454-(</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">d</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">d</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">d</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">d)</span><span style="color: rgb(175,0,0)">&#39;</span>, <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">03-5454-666</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(95,135,135)">#マッチしない文字列</span>
<span class="ansi-green-fg">----&gt; 2</span> <span style="color: rgb(0,135,0)">print</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">マッチした文字列=</span><span style="color: rgb(175,0,0)">&#39;</span>, <span class="ansi-yellow-bg">match1</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">group</span>(<span style="color: rgb(98,98,98)">0</span>), <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)"> キャプチャした文字列=</span><span style="color: rgb(175,0,0)">&#39;</span>, match1<span style="color: rgb(98,98,98)">.</span>group(<span style="color: rgb(98,98,98)">1</span>))

<span class="ansi-red-fg">AttributeError</span>: &#39;NoneType&#39; object has no attribute &#39;group&#39;
</pre></div></div>
</div>
<p>たとえば、if文でエラーを回避します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[70]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;03-5454-(\d\d\d\d)&#39;</span><span class="p">,</span> <span class="s1">&#39;03-5454-666&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">match1</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;マッチした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s1">&#39; キャプチャした文字列=&#39;</span><span class="p">,</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;マッチしていません&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
マッチしていません
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\d&#39;
&lt;&gt;:1: SyntaxWarning: invalid escape sequence &#39;\d&#39;
/var/folders/4n/53v5yxcx5t7d2sld1grw124w0000gn/T/ipykernel_78865/971918040.py:1: SyntaxWarning: invalid escape sequence &#39;\d&#39;
  match1 = re.search(&#39;03-5454-(\d\d\d\d)&#39;, &#39;03-5454-666&#39;)
</pre></div></div>
</div>
</section>
</section>
<section id="id20">
<h2>練習<a class="headerlink" href="#id20" title="Link to this heading">¶</a></h2>
<p>文字列 <code class="docutils literal notranslate"><span class="pre">str1</span></code> を引数として取り、<code class="docutils literal notranslate"><span class="pre">str1</span></code> を構成する文字列が <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">C</span></code>, <code class="docutils literal notranslate"><span class="pre">G</span></code>, <code class="docutils literal notranslate"><span class="pre">T</span></code> の4種類の文字以外の文字を含むかどうか調べて、これら以外を含む場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> を、そうでない場合は <code class="docutils literal notranslate"><span class="pre">True</span></code> を返す関数 <code class="docutils literal notranslate"><span class="pre">check_ACGTstr</span></code> を作成してください。 ただし、大文字と小文字は区別しません。また、空列の場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> を返してください。</p>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">check_ACGTstr</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[71], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が全て <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">check_ACGTstr</span><span class="p">(</span><span class="s1">&#39;AcCGTAGCacATcGgAaaTtGCacT&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_ACGTstr</span><span class="p">(</span><span class="s1">&#39;:ACaacgta24FgtGH&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">check_ACGTstr</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[72], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">check_ACGTstr</span>(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">AcCGTAGCacATcGgAaaTtGCacT</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">True</span>)
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(check_ACGTstr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">:ACaacgta24FgtGH</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">False</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(0,135,0)">print</span>(check_ACGTstr(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">&#39;</span>) <span style="color: rgb(98,98,98)">==</span> <span class="ansi-bold" style="color: rgb(0,135,0)">False</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;check_ACGTstr&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="id21">
<h2>練習<a class="headerlink" href="#id21" title="Link to this heading">¶</a></h2>
<p>xmlファイル B1S.xml は <a class="reference external" href="http://www.natcorp.ox.ac.uk">http://www.natcorp.ox.ac.uk</a> から入手できるイギリス英語のコーパスのファイルです。</p>
<p>B1S.xmlに含まれるwタグで囲まれる英単語をキー <code class="docutils literal notranslate"><span class="pre">key</span></code> に、その wタグの属性posの値を <code class="docutils literal notranslate"><span class="pre">key</span></code> の値とする辞書を返す関数 <code class="docutils literal notranslate"><span class="pre">get_pos</span></code> を作成してください。ただし、一般にwタグは、次のような形式で記述されます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;w pos=&quot;PRON&quot; （ &gt; 記号以外の何らかの文字列）&gt;（英単語） &lt;/w&gt;
</pre></div>
</div>
<p>たとえば、以下のような具合です。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;w pos=&quot;VERB&quot; hw=&quot;have&quot; c5=&quot;VHI&quot;&gt;have &lt;/w&gt;
</pre></div>
</div>
<p>以下のセルの <code class="docutils literal notranslate"><span class="pre">...</span></code> のところを書き換えて解答してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>
<span class="k">def</span> <span class="nf">get_pos</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[73], line 1</span>
<span class="ansi-red-fg">    import ...</span>
           ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> invalid syntax

</pre></div></div>
</div>
<p>上のセルで解答を作成した後、以下のセルを実行し、実行結果が <code class="docutils literal notranslate"><span class="pre">True</span></code> になることを確認してください。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[74]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">get_pos</span><span class="p">()[</span><span class="s1">&#39;They &#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PRON&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_pos</span><span class="p">()[</span><span class="s1">&#39;know &#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;VERB&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[74], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">get_pos</span>()[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">They </span><span style="color: rgb(175,0,0)">&#39;</span>] <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">PRON</span><span style="color: rgb(175,0,0)">&#39;</span>)
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(get_pos()[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">know </span><span style="color: rgb(175,0,0)">&#39;</span>] <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">VERB</span><span style="color: rgb(175,0,0)">&#39;</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;get_pos&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="練習の解答">
<h2>練習の解答<a class="headerlink" href="#練習の解答" title="Link to this heading">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[75]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">check_monthstr</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="n">reg_month</span> <span class="o">=</span> <span class="s1">&#39;((0(1|2|3|4|5|6|7|8|9))|10|11|12)&#39;</span> <span class="c1">#</span>
    <span class="c1">#reg_month = &#39;01|02|03|04|05|06|07|08|09|10|11|12&#39; # としてもよい</span>
    <span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">reg_month</span><span class="p">,</span> <span class="n">str1</span><span class="p">)</span> <span class="c1"># 文字列を「含む」なので、（matchではなく）searchを使う</span>
    <span class="k">return</span> <span class="n">match1</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[76]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">check_timestr</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="n">reg_hour</span> <span class="o">=</span> <span class="s1">&#39;((0(0|1|2|3|4|5|6|7|8|9))|10|11)&#39;</span> <span class="c1">#「時」部分の正規表現</span>
    <span class="c1">#reg_hour = &#39;((0[0-9]|10|11)&#39; # 文字クラスを使ってと表すこともできます（文字クラスは後で学習します</span>
    <span class="n">reg_min</span> <span class="o">=</span> <span class="s1">&#39;((0|2|3|4|5)(0|1|2|3|4|5|6|7|8|9))&#39;</span> <span class="c1">#「分」部分の正規表現</span>
    <span class="c1">#reg_min = &#39;([0-5][0-9])&#39; # 文字クラスを使ってと表すこともできます（文字クラスは後で学習します</span>
    <span class="n">reg_time</span> <span class="o">=</span> <span class="n">reg_hour</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="n">reg_min</span> <span class="c1"># 時部分と分部分を、「:」を挟んで結合した新しい正規表現</span>
    <span class="c1">#print(reg_time)</span>
    <span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">reg_time</span><span class="p">,</span> <span class="n">str1</span><span class="p">)</span> <span class="c1"># 文字列を「含む」なので、（matchではなく）searchを使う</span>
    <span class="k">return</span> <span class="n">match1</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[77]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">check_ipv4str</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="n">reg_0to9</span> <span class="o">=</span> <span class="s1">&#39;(0|1|2|3|4|5|6|7|8|9)&#39;</span> <span class="c1"># 0から9の数を表す正規表現</span>
    <span class="c1">#reg_0to9 = &#39;[0-9]&#39; # 文字クラスを使ってと表すこともできます（文字クラスは後で学習します</span>
    <span class="n">reg_0_1</span> <span class="o">=</span> <span class="s1">&#39;(0|1)&#39;</span> <span class="o">+</span> <span class="n">reg_0to9</span> <span class="o">+</span> <span class="n">reg_0to9</span> <span class="c1"># 先頭の文字が0もしくは1だったときの正規表現(000から199まで)</span>
    <span class="n">reg_20_24</span> <span class="o">=</span> <span class="s1">&#39;2(0|1|2|3|4)&#39;</span> <span class="o">+</span> <span class="n">reg_0to9</span> <span class="c1"># 先頭が20,21,22,23,24だったときの正規表現(200から249まで)</span>
    <span class="c1">#reg_20_24 = &#39;2[0-4]&#39; + reg_0to9 # 文字クラスを使ってと表すこともできます</span>
    <span class="n">reg_25</span> <span class="o">=</span> <span class="s1">&#39;25(0|1|2|3|4|5)&#39;</span> <span class="c1"># 先頭が25だったときの正規表現(250から255まで)</span>
    <span class="c1">#reg_25 = &#39;25[0-5]&#39; # 文字クラスを使ってと表すこともできます</span>
    <span class="n">reg_000_255</span> <span class="o">=</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="n">reg_0_1</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="n">reg_20_24</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="n">reg_25</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="c1"># aaa（000から255）を表す正規表現</span>
    <span class="c1">#print(reg_000_255)</span>
    <span class="n">reg_ip</span> <span class="o">=</span> <span class="n">reg_000_255</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="n">reg_000_255</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="n">reg_000_255</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="n">reg_000_255</span> <span class="c1"># aaa:bbb:ccc:dddを表す正規表現</span>
    <span class="c1">#print(reg_ip)</span>
    <span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">reg_ip</span><span class="p">,</span> <span class="n">str1</span><span class="p">)</span> <span class="c1"># 文字列を「含む」なので、（matchではなく）searchを使う</span>
    <span class="k">return</span> <span class="n">match1</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">check_monthdaystr</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="n">reg_month_31</span> <span class="o">=</span> <span class="s1">&#39;(01|03|05|07|08|10|12)&#39;</span> <span class="c1">#ddが01から31になるmm</span>
    <span class="n">reg_month_30</span> <span class="o">=</span> <span class="s1">&#39;(04|06|09|11)&#39;</span> <span class="c1">#ddが01から30になるmm</span>
    <span class="n">reg_1to9</span> <span class="o">=</span> <span class="s1">&#39;(1|2|3|4|5|6|7|8|9)&#39;</span> <span class="c1"># [1-9]でもよい</span>
    <span class="n">reg_0to9</span> <span class="o">=</span> <span class="s1">&#39;(0|1|2|3|4|5|6|7|8|9)&#39;</span> <span class="c1"># [0-9]でもよい</span>
    <span class="n">reg_day_01to09</span> <span class="o">=</span> <span class="s1">&#39;(0&#39;</span> <span class="o">+</span> <span class="n">reg_1to9</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span> <span class="c1"># ddが01から09になる場合</span>
    <span class="n">reg_day_10to19</span> <span class="o">=</span> <span class="s1">&#39;(1&#39;</span> <span class="o">+</span> <span class="n">reg_0to9</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span> <span class="c1"># ddが10から19になる場合</span>
    <span class="n">reg_day_20to29</span> <span class="o">=</span> <span class="s1">&#39;(2&#39;</span> <span class="o">+</span> <span class="n">reg_0to9</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span> <span class="c1"># ddが21から29になる場合</span>
    <span class="n">reg_day_01to29</span> <span class="o">=</span> <span class="n">reg_day_01to09</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="n">reg_day_10to19</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="n">reg_day_20to29</span> <span class="c1"># ddが01から29になる場合</span>
    <span class="n">reg_day_01to30</span> <span class="o">=</span> <span class="n">reg_day_01to29</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="s1">&#39;30&#39;</span> <span class="c1"># ddが01から30になる場合</span>
    <span class="n">reg_day_01to31</span> <span class="o">=</span> <span class="n">reg_day_01to30</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="s1">&#39;31&#39;</span> <span class="c1"># ddが01から31になる場合</span>
    <span class="n">reg_monthday_31</span> <span class="o">=</span> <span class="n">reg_month_31</span> <span class="o">+</span> <span class="s1">&#39;/(&#39;</span> <span class="o">+</span> <span class="n">reg_day_01to31</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span> <span class="c1"># mmとddを組み合わせる（01-31の場合）</span>
    <span class="n">reg_monthday_30</span> <span class="o">=</span> <span class="n">reg_month_30</span> <span class="o">+</span> <span class="s1">&#39;/(&#39;</span> <span class="o">+</span> <span class="n">reg_day_01to30</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span> <span class="c1"># mmとddを組み合わせる（01-30の場合）</span>
    <span class="n">reg_monthday_29</span> <span class="o">=</span> <span class="s1">&#39;02/(&#39;</span> <span class="o">+</span> <span class="n">reg_day_01to29</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span> <span class="c1"># mmとddを組み合わせる（01-29の場合はmmは02のみ）</span>
    <span class="c1"># 文字列を「含む」なので、（matchではなく）searchを使う</span>
    <span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">reg_monthday_31</span><span class="p">,</span> <span class="n">str1</span><span class="p">)</span> <span class="c1"># 問題文の条件3を満たす文字列とマッチするかどうか</span>
    <span class="k">if</span> <span class="n">match1</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">match1</span>
    <span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">reg_monthday_30</span><span class="p">,</span> <span class="n">str1</span><span class="p">)</span> <span class="c1"># 問題文の条件4を満たす文字列とマッチするかどうか</span>
    <span class="k">if</span> <span class="n">match1</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">match1</span>
    <span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">reg_monthday_29</span><span class="p">,</span> <span class="n">str1</span><span class="p">)</span> <span class="c1"># 問題文の条件5を満たす文字列とマッチするかどうか</span>
    <span class="k">return</span> <span class="n">match1</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[79]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">sumnumbers</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">numbers</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;[^0-9]+&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
    <span class="n">numbers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[80]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">get_engsentences</span><span class="p">():</span>
    <span class="n">word_list</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># 結果を格納するリスト</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;text-sample.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">file_str</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="c1">#ファイルの中身を文字列に格納</span>
    <span class="n">str_list</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^a-zA-Z][^a-zA-Z]*&#39;</span><span class="p">,</span> <span class="n">file_str</span><span class="p">)</span> <span class="c1"># 文字列を単語に区切る</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">str_list</span><span class="p">:</span> <span class="c1">#`re.split(r&#39;[^a-zA-Z][^a-zA-Z]*&#39;, f.read())` は、ファイル全体の文字列を単語に区切ります。</span>
    <span class="c1">#for word in re.split(r&#39;[^a-zA-Z][^a-zA-Z]*&#39;, f.read()): # と一行にまとめてもよい</span>
        <span class="k">if</span> <span class="n">word</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="c1">#空文字列を除く</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="c1">#単語（文字列）の中の大文字を小文字に変換します</span>
            <span class="n">word_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="c1">#リストに追加</span>
            <span class="c1">#word_list.append(word.lower())でも大丈夫</span>
    <span class="n">word_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span> <span class="c1"># sortメソッドは破壊的</span>
    <span class="k">return</span> <span class="n">word_list</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[81]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">get_engsentences2</span><span class="p">():</span>
    <span class="n">word_dict</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># 重複する単語を削除する為に辞書を使ってみる</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;text-sample.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">file_str</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="c1">#ファイルの中身を文字列に格納</span>
    <span class="n">str_list</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^a-zA-Z][^a-zA-Z]*&#39;</span><span class="p">,</span> <span class="n">file_str</span><span class="p">)</span> <span class="c1"># 文字列を単語に区切る</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">str_list</span><span class="p">:</span> <span class="c1">#`re.split(r&#39;[^a-zA-Z][^a-zA-Z]*&#39;, f.read())` は、ファイル全体の文字列を単語に区切ります。</span>
        <span class="k">if</span> <span class="n">word</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="c1">#空文字列を除く</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="c1">#単語（文字列）の中の大文字を小文字に変換します</span>
            <span class="n">word_dict</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;anthing good&#39;</span> <span class="c1">#wordという単語があったことを辞書に記録する（wordに対応する値は何でもよい）</span>
            <span class="c1">#word_dict[word.lower()] = &#39;anthing good&#39;でも大丈夫</span>
    <span class="n">word_list</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># 結果を格納するリスト</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">word_dict</span><span class="p">:</span>
        <span class="n">word_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="n">word_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">word_list</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[82]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">check_ACGTstr</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="n">reg_ACGT</span> <span class="o">=</span> <span class="s1">&#39;(A|C|G|T)+&#39;</span> <span class="c1"># A,C,G,Tを表す正規表現  # +→* だと空文字列がマッチしてしまう</span>
    <span class="c1">#reg_ACGT = &#39;(A|C|G|T)(A|C|G|T)*&#39; # A,C,G,Tを表す正規表現</span>
    <span class="c1">#reg_ACGT = &#39;[ACGT]+&#39; # A,C,G,Tを表す正規表現</span>
    <span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">reg_ACGT</span><span class="p">,</span> <span class="n">str1</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span> <span class="c1"># re.I を入れて、大文字と小文字を区別しない</span>
    <span class="k">if</span> <span class="n">match1</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">str1</span> <span class="o">==</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">():</span> <span class="c1"># str1全体とマッチした文字列が等しいかチェック</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
<span class="c1">#別解</span>
<span class="c1">#def check_ACGTstr(str1):</span>
<span class="c1">#    reg_ACGT = &#39;(A|C|G|T)+$&#39; # A,C,G,Tを表す正規表現  # +→* だと空文字列がマッチしてしまう</span>
<span class="c1">#    #reg_ACGT = &#39;(A|C|G|T)(A|C|G|T)*$&#39; # A,C,G,Tを表す正規表現</span>
<span class="c1">#    #reg_ACGT = &#39;[ACGT]+$&#39; # A,C,G,Tを表す正規表現</span>
<span class="c1">#    match1 = re.search(reg_ACGT, str1, re.I) # re.I を入れて、大文字と小文字を区別しない</span>
<span class="c1">#    if match1 != None: # str1全体とマッチした文字列が等しいかチェック</span>
<span class="c1">#        return True</span>
<span class="c1">#    return False</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[83]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">check_postalcode</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="n">reg1</span> <span class="o">=</span> <span class="s1">&#39;[0-9]{3,3}-[0-9]{4,4}&#39;</span>
    <span class="c1">#reg1 = &#39;\d{3,3}-\d{4,4}&#39; #でも可</span>
    <span class="c1">#reg1 = &#39;[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]&#39; #でも可</span>
    <span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">reg1</span><span class="p">,</span> <span class="n">str1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">match1</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="o">==</span> <span class="n">str1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
<span class="c1">#別解</span>
<span class="c1">#def check_postalcode(str1):</span>
<span class="c1">#    reg1 = &#39;[0-9]{3,3}-[0-9]{4,4}$&#39; #ドル記号を使って行末からマッチを調べる</span>
<span class="c1">#    #reg1 = &#39;\d{3,3}-\d{4,4}$&#39; #でも可</span>
<span class="c1">#    #reg1 = &#39;[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]$&#39; #でも可</span>
<span class="c1">#    match1 = re.match(reg1, str1)</span>
<span class="c1">#    if match1 == None:</span>
<span class="c1">#        return False</span>
<span class="c1">#    return True</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[84]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">check_extension</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="n">reg1</span> <span class="o">=</span> <span class="s1">&#39;2[0-9]{4,4}&#39;</span>
<span class="c1">#    reg1 = &#39;2\d{4,4}&#39; #でも可</span>
<span class="c1">#    reg1 = &#39;2[0-9][0-9][0-9][0-9]&#39; #でも可</span>
    <span class="n">match1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">reg1</span><span class="p">,</span> <span class="n">str1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">match1</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">match1</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="o">==</span> <span class="n">str1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
<span class="c1">#別解</span>
<span class="c1">#def check_extension(str1):</span>
<span class="c1">#    reg1 = &#39;2[0-9]{4,4}$&#39;</span>
<span class="c1">#    #reg1 = &#39;2\d{4,4}$&#39; #でも可</span>
<span class="c1">#    #reg1 = &#39;2[0-9][0-9][0-9][0-9]$&#39; #でも可</span>
<span class="c1">#    match1 = re.match(reg1, str1)</span>
<span class="c1">#    if match1 == None:</span>
<span class="c1">#        return False</span>
<span class="c1">#    return True</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[85]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">get_pos</span><span class="p">():</span>
    <span class="n">str_file</span> <span class="o">=</span> <span class="s1">&#39;B1S.xml&#39;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">str_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">str_script</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="c1"># ファイルの中身を1つの文字列に格納する</span>
    <span class="c1">#print(str_script)</span>
    <span class="n">itr1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s2">&quot;&lt;w[^&gt;]*pos=</span><span class="se">\&quot;</span><span class="s2">([^&gt;</span><span class="se">\&quot;</span><span class="s2">]*)</span><span class="se">\&quot;</span><span class="s2">[^&gt;]*&gt;([^&lt;]*)&lt;/w&gt;&quot;</span><span class="p">,</span> <span class="n">str_script</span><span class="p">)</span> <span class="c1"># 正規表現を使ってwタグ周辺の文字列をマッチ</span>
    <span class="n">dic1</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># 辞書初期化</span>
    <span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">itr1</span><span class="p">:</span>
        <span class="c1">#print(m1)</span>
        <span class="c1">#print(m1.group(1), m1.group(2))</span>
        <span class="n">dic1</span><span class="p">[</span><span class="n">m1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span> <span class="o">=</span> <span class="n">m1</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># groupを使ってマッチした文字列をキャプチャする</span>
    <span class="k">return</span> <span class="n">dic1</span>
</pre></div>
</div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Pythonプログラミング入門</a></h1>








<p>
  <a style="font-family: sans-serif; font-size: smaller; background: linear-gradient(to top, #353535 0%, #141414 100%); -webkit-font-smoothing: antialiased; font-weight: normal; text-shadow: rgb(0 0 0 / 40%) 0 -1px 0; padding: 2px 6px; color: #fff; text-decoration: none; border-radius: 4px; border: 1px solid #0d0d0d; box-shadow: inset 0 1px 1px 0 #8f8f8f;" href="https://github.com/utokyo-ipp/utokyo-ipp.github.io">View on GitHub</a>
</p><p>
  <a style="font-family: sans-serif; font-size: smaller; background: linear-gradient(to top, #ff1e00 0%, #de1e00 100%); -webkit-font-smoothing: antialiased; font-weight: normal; text-shadow: rgb(0 0 0 / 40%) 0 -1px 0; padding: 2px 6px; color: #fff; text-decoration: none; border-radius: 4px; border: 1px solid #0d0d0d; box-shadow: inset 0 1px 1px 0 #ff8e70;" href="https://utokyo-ipp.github.io/IPP_textbook.pdf">View PDF</a>
</p><p>
  <a style="border-bottom: none;" href="https://colab.research.google.com/github/utokyo-ipp/utokyo-ipp.github.io/blob/master/colab/appendix/5-re.ipynb"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Google Colaboratory"></a>
</p><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1/1-0.html">1-0. Colaboratory (Colab) の使い方</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1/1-1.html">1-1. 数値演算</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1/1-2.html">1-2. 変数と関数の基礎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1/1-3.html">1-3. 論理・比較演算と条件分岐の基礎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1/1-4.html">1-4. テストとデバッグ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2/2-1.html">2-1. 文字列 (string)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2/2-2.html">2-2. リスト (list)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2/2-3.html">2-3. 条件分岐</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3/3-1.html">3-1. 辞書 (dictionary)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3/3-2.html">3-2. 繰り返し</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3/3-3.html">3-3. 関数</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4/4-1.html">4-1. ファイル入出力の基本</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4/4-2.html">4-2. イテラブルとイテレータ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4/4-3.html">4-3. ディレクトリと木構造</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5/5-1.html">5-1. モジュールの使い方</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5/5-2.html">5-2. モジュールの作り方</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5/5-3.html">5-3. NumPyライブラリ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6/6-1.html">6-1. 内包表記</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6/6-2.html">6-2. 高階関数</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6/6-3.html">6-3. クラス</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7/7-1.html">7-1. pandasライブラリ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7/7-2.html">7-2. scikit-learnライブラリ</a></li>
<li class="toctree-l1"><a class="reference internal" href="1-jupyter-notebook.html">▲Jupyter Notebook の使い方</a></li>
<li class="toctree-l1"><a class="reference internal" href="2-set.html">▲セット (set)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3-recursion.html">▲再帰</a></li>
<li class="toctree-l1"><a class="reference internal" href="3-visualization.html">▲簡単なデータの可視化</a></li>
<li class="toctree-l1"><a class="reference internal" href="4-csv.html">▲CSVファイルの入出力</a></li>
<li class="toctree-l1"><a class="reference internal" href="5-bokeh.html">▲Bokehライブラリ</a></li>
<li class="toctree-l1"><a class="reference internal" href="5-command.html">▲Pythonスクリプトとコマンドライン実行</a></li>
<li class="toctree-l1"><a class="reference internal" href="5-matplotlib.html">▲Matplotlibライブラリ</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">▲正規表現</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#正規表現の基本">正規表現の基本</a></li>
<li class="toctree-l2"><a class="reference internal" href="#練習">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#文字クラス">文字クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="#正規表現に関する基本的な関数">正規表現に関する基本的な関数</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#その他の反復演算">その他の反復演算</a></li>
<li class="toctree-l2"><a class="reference internal" href="#メタ文字">メタ文字</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id14">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id15">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id16">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id17">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#正規表現のエスケープシーケンス">正規表現のエスケープシーケンス</a></li>
<li class="toctree-l2"><a class="reference internal" href="#正規表現に関する関数とメソッド">正規表現に関する関数とメソッド</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id20">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id21">練習</a></li>
<li class="toctree-l2"><a class="reference internal" href="#練習の解答">練習の解答</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../index_of_terms.html">索引</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="5-matplotlib.html" title="previous chapter">▲Matplotlibライブラリ</a></li>
      <li>Next: <a href="../index_of_terms.html" title="next chapter">索引</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2020–2024, 東京大学 数理・情報教育研究センター (CC BY-NC-ND 4.0).
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.0.2</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
    </div>

    

    
    <script>

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'G-8M0RXGPPSR']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>